<!DOCTYPE html>
<html>
<meta  lang="zh-Hans" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#fff" id="theme-color">
  <link rel="icon" href="/img/logo-starming.png">
  <title>戴铭的博客</title>
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
    var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
      }
    };
    setDarkmode();
  </script>
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
  </script>
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_vpj3dq9ceqa.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  <link rel="preload" href="//cdn.jsdelivr.net/npm/fslightbox@3.1.0/index.min.js" as="script">
  
  
  <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
  
  
  
  
<link rel="stylesheet" href="/css/main.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_vpj3dq9ceqa.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">

  
  
  
  
  
  <link href="/js/lib/prism/prism.min.css" rel="stylesheet" data-prism="prism">
  
  
  
<link rel="stylesheet" href="/js/lib/prism/prism-line-numbers.min.css">

  
  
  
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  <div class="wrapper">
    
    <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
      <img class="navbar-logo-img" src="/img/logo-starming.png">
      
      <span class="navbar-logo-dsc">戴铭的博客</span>
    </span>
  </div>
  <div class="navbar-menu">
    
    <a href="/" class="navbar-menu-item">Home </a>
    
    <a href="/archives" class="navbar-menu-item">Archive </a>
    
    <a href="/tags" class="navbar-menu-item">Tags </a>
    
    <a href="/categories" class="navbar-menu-item">Categories </a>
    
    <a href="/about" class="navbar-menu-item">About </a>
    
    <a href="" class="navbar-menu-item">Friends </a>
    
    <a class="navbar-menu-item darknavbar" id="dark"><i class="iconfont icon-weather"></i></a>
  </div>
</nav>
    
    <div class="section-wrap">
      <div class="container">
        <div class="columns">
          <main class="main-column">
<div class="image-wrapper">
  <img src="/uploads/pamphlet-series-listdataview/01.png" data-src="/uploads/pamphlet-series-listdataview/01.png"
    srcset="data:image/svg+xml,%3Csvg%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20viewBox=&#39;0%200%20300%20300&#39;%3E%3C/svg%3E"
    class="image lozad">
</div>

<article class="card card-content">
  <header>
    <h1 class="post-title">
      小册子之 List、Lazy 容器、ScrollView、Grid 和 Table 数据集合 SwiftUI 视图
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2024-05-18T01:06:54.000Z" style="display: flex; align-items: center;">
      <i class="iconfont icon-calendar" style="margin-right: 2px;"></i>
      <span>2024-05-18</span>
    </time>
    
    <span class="dot"></span>
    
    <a href="/categories/App/" class="post-meta-link">App</a>
    
    
    
    <span class="dot"></span>
    <span>8.4k words</span>
    
  </div>
  
  <div class="post-meta post-show-meta" style="margin-top: -10px;">
    <div style="display: flex; align-items: center;">
      <i class="iconfont icon-biaoqian" style="margin-right: 2px; font-size: 1.15rem;"></i>
      
      
        <a href="/tags/SwiftUI/" class="post-meta-link">SwiftUI</a>
      
    </div>
  </div>
  
  </header>
  <div id="section" class="post-content">
    <p>以下内容已整理到小册子中，本文会随着系统更新和我更多的实践而新增和更新，你可以下载<a target="_blank" rel="noopener" href="https://apps.apple.com/cn/app/%E6%88%B4%E9%93%AD%E7%9A%84%E5%BC%80%E5%8F%91%E5%B0%8F%E5%86%8C%E5%AD%90/id1609702529?mt=12">“戴铭的开发小册子”</a>应用，来跟踪查看本文内容新增和更新。小册子应用的代码可以在 <a target="_blank" rel="noopener" href="https://github.com/ming1016/SwiftPamphletApp">Github</a> 上查看。</p>
<p>本文属于小册子系列中的一篇，已发布系列文章有：</p>
<ul>
<li><a href="https://starming.com/2024/05/18/pamphlet-series-swiftdata/">小册子之如何使用 SwiftData 开发 SwiftUI 应用</a></li>
<li><a href="https://starming.com/2024/05/18/pamphlet-series-widget/">小册子之简说 Widget 小组件</a></li>
<li>【本篇】<a href="https://starming.com/2024/05/18/pamphlet-series-listdataview/">小册子之 List、Lazy 容器、ScrollView、Grid 和 Table 数据集合 SwiftUI 视图</a></li>
<li><a href="https://starming.com/2024/05/18/pamphlet-series-layout/">小册子之详说 Navigation、ViewThatFits、Layout 协议等布局 SwiftUI 组件</a></li>
<li><a href="https://starming.com/2024/05/18/pamphlet-series-form/">小册子之 Form、Picker、Toggle、Slider 和 Stepper 表单相关 SwiftUI 视图</a></li>
<li><a href="https://starming.com/2024/05/25/pamphlet-series-animation/">小册子之 SwiftUI 动画</a></li>
</ul>
<h2 id="ForEach"><a href="#ForEach" class="headerlink" title="ForEach"></a>ForEach</h2><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>在 SwiftUI 中，<code>ForEach</code> 是一个结构体，它可以创建一组视图，每个视图都有一个与数据集中的元素相对应的唯一标识符。这对于在列表或其他集合视图中显示数据非常有用。</p>
<p>以下视图集会用到 ForEach：</p>
<ul>
<li>List</li>
<li>ScrollView</li>
<li>LazyVStack &#x2F; LazyHStack</li>
<li>Picker</li>
<li>Grids (LazyVGrid &#x2F; LazyHGrid)</li>
</ul>
<p>例如，如果你有一个 <code>BookmarkModel</code> 的数组，并且你想为每个书签创建一个文本视图，你可以这样做：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> bookmarks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">BookmarkModel</span><span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span>bookmarks<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> bookmark <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span>bookmark<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>ForEach</code> 遍历 <code>bookmarks</code> 数组，并为每个 <code>BookmarkModel</code> 对象创建一个 <code>Text</code> 视图。<code>bookmark</code> 参数是当前遍历的 <code>BookmarkModel</code> 对象。</p>
<p><code>BookmarkModel</code> 必须遵循 <code>Identifiable</code> 协议，这样 SwiftUI 才能知道如何唯一地标识每个视图。在你的代码中，<code>BookmarkModel</code> 已经有一个 <code>id</code> 属性，所以你只需要让 <code>BookmarkModel</code> 遵循 <code>Identifiable</code> 协议即可：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">BookmarkModel</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// your code here</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="使用索引范围进行编号"><a href="#使用索引范围进行编号" class="headerlink" title="使用索引范围进行编号"></a>使用索引范围进行编号</h3><p>你可以使用 <code>ForEach</code> 结构体的另一个版本，它接受一个范围作为其数据源。这个范围可以是一个索引范围，这样你就可以为每个项目编号。</p>
<p>例如，如果你有一个 <code>BookmarkModel</code> 的数组，并且你想为每个书签创建一个文本视图，并在前面添加一个编号，你可以这样做：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> bookmarks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">BookmarkModel</span><span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span>bookmarks<span class="token punctuation">.</span>indices<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> index <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index <span class="token operator">+</span> <span class="token number">1</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">. </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">bookmarks<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，<code>ForEach</code> 遍历 <code>bookmarks</code> 数组的索引，并为每个 <code>BookmarkModel</code> 对象创建一个 <code>Text</code> 视图。<code>index</code> 参数是当前遍历的索引。我们使用 <code>\(index + 1). \(bookmarks[index].name)</code> 来创建一个带有编号的文本视图。请注意，我们使用 <code>index + 1</code> 而不是 <code>index</code>，因为数组的索引是从 0 开始的，但我们通常希望编号是从 1 开始的。</p>
<h3 id="使用-enumerated-编号"><a href="#使用-enumerated-编号" class="headerlink" title="使用 enumerated 编号"></a>使用 enumerated 编号</h3><p> <code>enumerated()</code> </p>
<p>以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> bookmarks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">BookmarkModel</span><span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">(</span>bookmarks<span class="token punctuation">.</span><span class="token function">enumerated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> index<span class="token punctuation">,</span> bookmark <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">. </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">bookmark<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>我们使用 <code>Array(bookmarks.enumerated())</code> 来创建一个元组数组，每个元组包含一个索引和一个 <code>BookmarkModel</code> 对象。然后，我们使用 <code>ForEach</code> 遍历这个元组数组，并为每个元组创建一个 <code>Text</code> 视图。<code>index</code> 参数是当前遍历的索引，<code>bookmark</code> 参数是当前遍历的 <code>BookmarkModel</code> 对象。</p>
<h3 id="使用-zip-编号"><a href="#使用-zip-编号" class="headerlink" title="使用 zip 编号"></a>使用 zip 编号</h3><p><code>zip(_:_:)</code> 函数可以将两个序列合并为一个元组序列。你可以使用这个函数和 <code>ForEach</code> 结构体来为数组中的每个元素添加一个编号。</p>
<p>例如，如果你有一个 <code>BookmarkModel</code> 的数组，并且你想为每个书签创建一个文本视图，并在前面添加一个编号，你可以这样做：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> bookmarks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">BookmarkModel</span><span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token function">zip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">...</span><span class="token punctuation">,</span> bookmarks<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> index<span class="token punctuation">,</span> bookmark <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">. </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">bookmark<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>写出扩展，方便调用</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token attribute atrule">@dynamicMemberLookup</span>
<span class="token keyword">struct</span> <span class="token class-name">Numbered</span><span class="token operator">&lt;</span><span class="token class-name">Element</span><span class="token operator">></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> number<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">var</span> element<span class="token punctuation">:</span> <span class="token class-name">Element</span>
    
    <span class="token keyword">subscript</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">></span><span class="token punctuation">(</span>dynamicMember keyPath<span class="token punctuation">:</span> <span class="token class-name">WritableKeyPath</span><span class="token operator">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">T</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">get</span> <span class="token punctuation">&#123;</span> element<span class="token punctuation">[</span>keyPath<span class="token punctuation">:</span> keyPath<span class="token punctuation">]</span> <span class="token punctuation">&#125;</span>
        <span class="token keyword">set</span> <span class="token punctuation">&#123;</span> element<span class="token punctuation">[</span>keyPath<span class="token punctuation">:</span> keyPath<span class="token punctuation">]</span> <span class="token operator">=</span> newValue <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">extension</span> <span class="token class-name">Sequence</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">func</span> <span class="token function-definition function">numbered</span><span class="token punctuation">(</span>startingAt start<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">Numbered</span><span class="token operator">&lt;</span><span class="token class-name">Element</span><span class="token operator">></span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span>
        <span class="token function">zip</span><span class="token punctuation">(</span>start<span class="token operator">...</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span>map <span class="token punctuation">&#123;</span> <span class="token class-name">Numbered</span><span class="token punctuation">(</span>number<span class="token punctuation">:</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">,</span> element<span class="token punctuation">:</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">extension</span> <span class="token class-name">Numbered</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span> <span class="token keyword">where</span> <span class="token class-name">Element</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> id<span class="token punctuation">:</span> <span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token constant">ID</span> <span class="token punctuation">&#123;</span> element<span class="token punctuation">.</span>id <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>使用：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token class-name">ForEach</span><span class="token punctuation">(</span>bookmark<span class="token punctuation">.</span><span class="token function">numbered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> numberedBookmark <span class="token keyword">in</span>
    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">numberedBookmark<span class="token punctuation">.</span>number</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">. </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">numberedBookmark<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="Scroll视图"><a href="#Scroll视图" class="headerlink" title="Scroll视图"></a>Scroll视图</h2><h3 id="ScrollView"><a href="#ScrollView" class="headerlink" title="ScrollView"></a>ScrollView</h3><h4 id="新增-modifier"><a href="#新增-modifier" class="headerlink" title="新增 modifier"></a>新增 modifier</h4><pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token class-name">ScrollView</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">..&lt;</span><span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">.</span><span class="token function">scrollDisabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// 设置是否可滚动</span>
<span class="token punctuation">.</span><span class="token function">scrollDismissesKeyboard</span><span class="token punctuation">(</span><span class="token punctuation">.</span>interactively<span class="token punctuation">)</span> <span class="token comment">// 关闭键盘</span>
<span class="token punctuation">.</span><span class="token function">scrollIndicators</span><span class="token punctuation">(</span><span class="token punctuation">.</span>visible<span class="token punctuation">)</span> <span class="token comment">// 设置滚动指示器是否可见</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ScrollViewReader"><a href="#ScrollViewReader" class="headerlink" title="ScrollViewReader"></a>ScrollViewReader</h4><p>ScrollView 使用 scrollTo 可以直接滚动到指定的位置。ScrollView 还可以透出偏移量，利用偏移量可以定义自己的动态视图，比如向下向上滚动视图时有不同效果，到顶部显示标题视图等。</p>
<p>示例代码如下：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">PlayScrollView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> scrollOffset<span class="token punctuation">:</span> <span class="token class-name">CGFloat</span> <span class="token operator">=</span> <span class="token punctuation">.</span>zero
    
    <span class="token keyword">var</span> infoView<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">GeometryReader</span> <span class="token punctuation">&#123;</span> g <span class="token keyword">in</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span>"移动了 <span class="token punctuation">\</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">(</span>scrollOffset<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">.</span>number<span class="token punctuation">.</span><span class="token function">precision</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">fractionLength</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rounded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>"<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 标准用法</span>
        <span class="token class-name">ScrollViewReader</span> <span class="token punctuation">&#123;</span> s <span class="token keyword">in</span>
            <span class="token class-name">ScrollView</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">..&lt;</span><span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"跳到150"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                withAnimation <span class="token punctuation">&#123;</span>
                    s<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> anchor<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> <span class="token comment">// end Button</span>
        <span class="token punctuation">&#125;</span> <span class="token comment">// end ScrollViewReader</span>
        
        <span class="token comment">// 自定义的 ScrollView 透出 offset 供使用</span>
        <span class="token class-name">ZStack</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">PCScrollView</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">..&lt;</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> whenMoved<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span> d <span class="token keyword">in</span>
                scrollOffset <span class="token operator">=</span> d
            <span class="token punctuation">&#125;</span>
            infoView
            
        <span class="token punctuation">&#125;</span> <span class="token comment">// end ZStack</span>
    <span class="token punctuation">&#125;</span> <span class="token comment">// end body</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// MARK: - 自定义 ScrollView</span>
<span class="token keyword">struct</span> <span class="token class-name">PCScrollView</span><span class="token operator">&lt;</span><span class="token class-name">C</span><span class="token punctuation">:</span> <span class="token class-name">View</span><span class="token operator">></span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> c<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">C</span>
    <span class="token keyword">let</span> whenMoved<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">CGFloat</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Void</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token attribute atrule">@ViewBuilder</span> c<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">C</span><span class="token punctuation">,</span> whenMoved<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">CGFloat</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Void</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>c <span class="token operator">=</span> c
        <span class="token keyword">self</span><span class="token punctuation">.</span>whenMoved <span class="token operator">=</span> whenMoved
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">var</span> offsetReader<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">GeometryReader</span> <span class="token punctuation">&#123;</span> g <span class="token keyword">in</span>
            <span class="token class-name">Color</span><span class="token punctuation">.</span>clear
                <span class="token punctuation">.</span><span class="token function">preference</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> <span class="token class-name">OffsetPreferenceKey</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> g<span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"frameLayer"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>minY<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ScrollView</span> <span class="token punctuation">&#123;</span>
            offsetReader
            <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>top<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">coordinateSpace</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"frameLayer"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onPreferenceChange</span><span class="token punctuation">(</span><span class="token class-name">OffsetPreferenceKey</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> perform<span class="token punctuation">:</span> whenMoved<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span> <span class="token comment">// end body</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">private</span> <span class="token keyword">struct</span> <span class="token class-name">OffsetPreferenceKey</span><span class="token punctuation">:</span> <span class="token class-name">PreferenceKey</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">static</span> <span class="token keyword">var</span> defaultValue<span class="token punctuation">:</span> <span class="token class-name">CGFloat</span> <span class="token operator">=</span> <span class="token punctuation">.</span>zero
  <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">reduce</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token keyword">inout</span> <span class="token class-name">CGFloat</span><span class="token punctuation">,</span> nextValue<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">CGFloat</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="固定到滚动视图的顶部"><a href="#固定到滚动视图的顶部" class="headerlink" title="固定到滚动视图的顶部"></a>固定到滚动视图的顶部</h3><p>LazyVStack 有个参数 pinnedViews 可以用于固定滚动视图的顶部。</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token class-name">ScrollView</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">LazyVStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">,</span> spacing<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> pinnedViews<span class="token punctuation">:</span> <span class="token punctuation">.</span>sectionHeaders<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Section</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span>books<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> book <span class="token keyword">in</span>
                <span class="token class-name">BookRowView</span><span class="token punctuation">(</span>book<span class="token punctuation">:</span> book<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span> header<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">HeaderView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"小说"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        <span class="token operator">....</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="滚动到特定的位置"><a href="#滚动到特定的位置" class="headerlink" title="滚动到特定的位置"></a>滚动到特定的位置</h3><h4 id="scrollPostion-版本"><a href="#scrollPostion-版本" class="headerlink" title="scrollPostion 版本"></a>scrollPostion 版本</h4><p><code>scrollPositon(id:)</code> 比 ScrollViewReader 简单，但是只适用于 ScrollView。数据源遵循 Identifiable，不用显式使用 <code>id</code> 修饰符</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> id<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token operator">?</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">VStack</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Scroll to Bookmark 3"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                withAnimation <span class="token punctuation">&#123;</span>
                    id <span class="token operator">=</span> <span class="token number">3</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Scroll to Bookmark 13"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                withAnimation <span class="token punctuation">&#123;</span>
                    id <span class="token operator">=</span> <span class="token number">13</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token class-name">ScrollView</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ScrollViewReader</span> <span class="token punctuation">&#123;</span> scrollView <span class="token keyword">in</span>
                    <span class="token class-name">LazyVStack</span> <span class="token punctuation">&#123;</span>
                        <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token class-name">Bookmark</span><span class="token punctuation">.</span><span class="token function">simpleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> bookmark <span class="token keyword">in</span>
                            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">bookmark<span class="token punctuation">.</span>index</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span>bookmark<span class="token punctuation">.</span>index<span class="token punctuation">)</span>
                        <span class="token punctuation">&#125;</span>
                        
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">scrollPosition</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> $id<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">scrollTargetLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">struct</span> <span class="token class-name">Bookmark</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span><span class="token punctuation">,</span><span class="token class-name">Hashable</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> index<span class="token punctuation">:</span> <span class="token class-name">Int</span>
        
        <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">simpleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">Bookmark</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Bookmark</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">...</span><span class="token number">100</span> <span class="token punctuation">&#123;</span>
                re<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">Bookmark</span><span class="token punctuation">(</span>index<span class="token punctuation">:</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">return</span> re
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>scrollTargetLayout 可以获得当前滚动位置。锚点不可配，默认是 center。</p>
<h4 id="ScrollViewReader-版本"><a href="#ScrollViewReader-版本" class="headerlink" title="ScrollViewReader 版本"></a>ScrollViewReader 版本</h4><p>ScrollViewReader 这个版本可以适用于 List，也可以配置锚点</p>
<p>你可以使用 <code>ScrollViewReader</code> 和 <code>scrollTo(_:anchor:)</code> 方法来滚动到特定的元素。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> bookmarks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> selectedBookmarkId<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token operator">?</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">VStack</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Scroll to Bookmark 3"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                selectedBookmarkId <span class="token operator">=</span> <span class="token number">3</span>
            <span class="token punctuation">&#125;</span>
            <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Scroll to Bookmark 13"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                selectedBookmarkId <span class="token operator">=</span> <span class="token number">13</span>
            <span class="token punctuation">&#125;</span>
            <span class="token class-name">ScrollView</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ScrollViewReader</span> <span class="token punctuation">&#123;</span> scrollView <span class="token keyword">in</span>
                    <span class="token class-name">LazyVStack</span> <span class="token punctuation">&#123;</span>
                        <span class="token class-name">ForEach</span><span class="token punctuation">(</span>bookmarks<span class="token punctuation">.</span>indices<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> index <span class="token keyword">in</span>
                            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">bookmarks<span class="token punctuation">[</span>index<span class="token punctuation">]</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
                        <span class="token punctuation">&#125;</span>
                        <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> selectedBookmarkId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> oldValue<span class="token punctuation">,</span> newValue <span class="token keyword">in</span>
                            <span class="token keyword">if</span> <span class="token keyword">let</span> newValue <span class="token operator">=</span> newValue <span class="token punctuation">&#123;</span>
                                withAnimation <span class="token punctuation">&#123;</span>
                                    scrollView<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> anchor<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">)</span>
                                <span class="token punctuation">&#125;</span>
                            <span class="token punctuation">&#125;</span>
                        <span class="token punctuation">&#125;</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们首先创建了一个 <code>Button</code>，当点击这个按钮时，<code>selectedBookmarkId</code> 的值会被设置为 3。然后，我们创建了一个 <code>ScrollView</code>，并在 <code>ScrollView</code> 中添加了一个 <code>ScrollViewReader</code>。我们在 <code>ScrollViewReader</code> 中添加了一个 <code>LazyVStack</code>，并使用 <code>ForEach</code> 遍历 <code>bookmarks</code> 数组的索引，为每个索引创建一个 <code>Text</code> 视图。我们使用 <code>id(_:)</code> 方法为每个 <code>Text</code> 视图设置了一个唯一的 ID。</p>
<p>我们使用 <code>onChange(of:perform:)</code> 方法来监听 <code>selectedBookmarkId</code> 的变化。当 <code>selectedBookmarkId</code> 的值改变时，我们会调用 <code>scrollTo(_:anchor:)</code> 方法来滚动到特定的元素。<code>anchor: .top</code> 参数表示我们希望滚动到的元素位于滚动视图的顶部。</p>
<h3 id="scrollTargetBehavior分页滚动"><a href="#scrollTargetBehavior分页滚动" class="headerlink" title="scrollTargetBehavior分页滚动"></a>scrollTargetBehavior分页滚动</h3><h4 id="按可视尺寸分页"><a href="#按可视尺寸分页" class="headerlink" title="按可视尺寸分页"></a>按可视尺寸分页</h4><p><code>.scrollTargetBehavior(.paging)</code> 可以让 ScrollView 滚动，滚动一页的范围是 ScrollView 的可视尺寸。
 </p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ScrollView</span><span class="token punctuation">(</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">LazyHStack</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">...</span><span class="token number">20</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                    <span class="token function">colorView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">scrollTargetBehavior</span><span class="token punctuation">(</span><span class="token punctuation">.</span>paging<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token attribute atrule">@ViewBuilder</span>
    <span class="token keyword">func</span> <span class="token function-definition function">colorView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token punctuation">[</span><span class="token class-name">Color</span><span class="token punctuation">.</span>red<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>yellow<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>mint<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>indigo<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>green<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">randomElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="按容器元素对齐分页"><a href="#按容器元素对齐分页" class="headerlink" title="按容器元素对齐分页"></a>按容器元素对齐分页</h4><p>使用 <code>.scrollTargetBehavior(.viewAligned)</code> 配合 scrollTargetLayout。示例代码如下：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ScrollView</span><span class="token punctuation">(</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">LazyHStack</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">...</span><span class="token number">20</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                    <span class="token function">colorView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">scrollTargetLayout</span><span class="token punctuation">(</span>isEnabled<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">scrollTargetBehavior</span><span class="token punctuation">(</span><span class="token punctuation">.</span>viewAligned<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token attribute atrule">@ViewBuilder</span>
    <span class="token keyword">func</span> <span class="token function-definition function">colorView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token punctuation">[</span><span class="token class-name">Color</span><span class="token punctuation">.</span>red<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>yellow<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>mint<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>indigo<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>green<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">randomElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>




<h3 id="scrollTransition视觉效果"><a href="#scrollTransition视觉效果" class="headerlink" title="scrollTransition视觉效果"></a>scrollTransition视觉效果</h3><p>iOS 17 新推出 <code>.scrollTransition</code>，用于处理滚动时的动画。</p>
<p><code>.transition</code> 用于视图插入和移除视图树时的动画。</p>
<p><code>.scrollTransition</code> 会和滚动联合起来进行平滑的过渡动画处理。<code>.scrollTransition</code> 可以修改很多属性，比如大小，可见性还有旋转等。</p>
<p><code>.scrollTransition</code> 可以针对不同阶段进行处理，目前有三个阶段：</p>
<ul>
<li><code>topLeading</code>: 视图进入 ScrollView 可见区域</li>
<li><code>identity</code>: 在可见区域中</li>
<li><code>bottomTrailing</code>: 视图离开 ScrollView 可见区域</li>
</ul>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ScrollView</span><span class="token punctuation">(</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">LazyHStack</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">...</span><span class="token number">20</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                    <span class="token function">colorView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span>scrollTransition <span class="token punctuation">&#123;</span> content<span class="token punctuation">,</span> phase <span class="token keyword">in</span> 
                            content
                                <span class="token punctuation">.</span><span class="token function">scaleEffect</span><span class="token punctuation">(</span>phase<span class="token punctuation">.</span>isIdentity <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0.4</span><span class="token punctuation">)</span>
                        <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token attribute atrule">@ViewBuilder</span>
    <span class="token keyword">func</span> <span class="token function-definition function">colorView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token punctuation">[</span><span class="token class-name">Color</span><span class="token punctuation">.</span>red<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>yellow<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>blue<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>mint<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>indigo<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>green<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">randomElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>使用阶段的值</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token punctuation">.</span><span class="token function">scrollTransition</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">animated</span><span class="token punctuation">(</span><span class="token punctuation">.</span>bouncy<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> content<span class="token punctuation">,</span> phase <span class="token keyword">in</span>
    content
        <span class="token punctuation">.</span><span class="token function">scaleEffect</span><span class="token punctuation">(</span>phase<span class="token punctuation">.</span>isIdentity <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> phase<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>不同阶段的产生效果设置</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token punctuation">.</span><span class="token function">scrollTransition</span><span class="token punctuation">(</span>
    topLeading<span class="token punctuation">:</span> <span class="token punctuation">.</span>animated<span class="token punctuation">,</span>
    bottomTrailing<span class="token punctuation">:</span> <span class="token punctuation">.</span>interactive
<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> content<span class="token punctuation">,</span> phase <span class="token keyword">in</span>
    content<span class="token punctuation">.</span><span class="token function">rotationEffect</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">radians</span><span class="token punctuation">(</span>phase<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>.rotation3DEffect</code> 也是支持的。</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token punctuation">.</span><span class="token function">scrollTransition</span><span class="token punctuation">(</span><span class="token punctuation">.</span>interactive<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> content<span class="token punctuation">,</span> phase <span class="token keyword">in</span>
    content
        <span class="token punctuation">.</span><span class="token function">rotation3DEffect</span><span class="token punctuation">(</span>
            <span class="token class-name">Angle</span><span class="token punctuation">.</span><span class="token function">degrees</span><span class="token punctuation">(</span>phase<span class="token punctuation">.</span>isIdentity <span class="token operator">?</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            axis<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0.9</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0.0</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> phase<span class="token punctuation">.</span>value <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">300</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="ScrollView-参考资料"><a href="#ScrollView-参考资料" class="headerlink" title="ScrollView-参考资料"></a>ScrollView-参考资料</h3><h4 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h4><ul>
<li><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/swiftui/scrollview">ScrollView | Apple Developer Documentation</a> 官方文档</li>
<li><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/swiftui/scroll-views">Scroll views | 接口</a> 官方接口文档</li>
</ul>
<h4 id="WWDC"><a href="#WWDC" class="headerlink" title="WWDC"></a>WWDC</h4><p>23</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.apple.com/wwdc23/10159">Beyond scroll views - WWDC23 - Videos - Apple Developer</a></li>
</ul>
<h2 id="List列表"><a href="#List列表" class="headerlink" title="List列表"></a>List列表</h2><h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="https://ming1016.github.io/qdimg/240505/list-ap01.jpeg" class="lozad post-image"src="https://ming1016.github.io/qdimg/240505/list-ap01.jpeg"></p>
<p>List 除了能够展示数据外，还有下拉刷新、过滤搜索和侧滑 Swipe 动作提供更多 Cell 操作的能力。</p>
<p>通过 List 的可选子项参数提供数据模型的关键路径来制定子项路劲，还可以实现大纲视图，使用 DisclosureGroup 和 OutlineGroup  可以进一步定制大纲视图。</p>
<p>使用 <code>.listRowSeparator(.hidden, edges: .all)</code> 可以隐藏分割线。</p>
<p>下面是 List 使用，包括了 DisclosureGroup 和 OutlineGroup 的演示代码：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">PlayListView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@StateObject</span> <span class="token keyword">var</span> l<span class="token punctuation">:</span> <span class="token constant">PLVM</span> <span class="token operator">=</span> <span class="token function">PLVM</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> s<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">""</span></span>
    
    <span class="token keyword">var</span> outlineModel <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"文件夹一"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"folder.fill"</span></span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"个人"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"person.crop.circle.fill"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"群组"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"person.2.circle.fill"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"加好友"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"person.badge.plus"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"文件夹二"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"folder.fill"</span></span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"晴天"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"sun.max.fill"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"夜间"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"moon.fill"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"雨天"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"cloud.rain.fill"</span></span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"雷加雨"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"cloud.bolt.rain.fill"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"太阳雨"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"cloud.sun.rain.fill"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"文件夹三"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"folder.fill"</span></span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"电话"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"phone"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"拍照"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"camera.circle.fill"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">POutlineModel</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"提醒"</span></span><span class="token punctuation">,</span> iconName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"bell"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">HStack</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// List 通过$语法可以将集合的元素转换成可绑定的值</span>
            <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span>$l<span class="token punctuation">.</span>ls<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> $d <span class="token keyword">in</span>
                    <span class="token class-name">PRowView</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> d<span class="token punctuation">.</span>s<span class="token punctuation">,</span> i<span class="token punctuation">:</span> d<span class="token punctuation">.</span>i<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">listRowInsets</span><span class="token punctuation">(</span><span class="token class-name">EdgeInsets</span><span class="token punctuation">(</span>top<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> leading<span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span> bottom<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> trailing<span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">listRowBackground</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>black<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span>refreshable <span class="token punctuation">&#123;</span>
                <span class="token comment">// 下拉刷新</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">searchable</span><span class="token punctuation">(</span>text<span class="token punctuation">:</span> $s<span class="token punctuation">)</span> <span class="token comment">// 搜索</span>
            <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> newValue <span class="token keyword">in</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"搜索关键字：</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">s</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
            
            <span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token comment">// 自定义 List</span>
            <span class="token class-name">VStack</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">PCustomListView</span><span class="token punctuation">(</span>$l<span class="token punctuation">.</span>ls<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> $d <span class="token keyword">in</span>
                    <span class="token class-name">PRowView</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> d<span class="token punctuation">.</span>s<span class="token punctuation">,</span> i<span class="token punctuation">:</span> d<span class="token punctuation">.</span>i<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
                <span class="token comment">// 添加数据</span>
                <span class="token class-name">Button</span> <span class="token punctuation">&#123;</span>
                    l<span class="token punctuation">.</span>ls<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">PLModel</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"More"</span></span><span class="token punctuation">,</span> i<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span> label<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"添加"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token comment">// 使用大纲</span>
            <span class="token class-name">List</span><span class="token punctuation">(</span>outlineModel<span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                <span class="token class-name">Label</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>title<span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> i<span class="token punctuation">.</span>iconName<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
            
            <span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token comment">// 自定义大纲视图</span>
            <span class="token class-name">VStack</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"可点击标题展开"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>headline<span class="token punctuation">)</span>
                <span class="token class-name">PCOutlineListView</span><span class="token punctuation">(</span>d<span class="token punctuation">:</span> outlineModel<span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                    <span class="token class-name">Label</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>title<span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> i<span class="token punctuation">.</span>iconName<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token comment">// 使用 OutlineGroup 实现大纲视图</span>
            <span class="token class-name">VStack</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"OutlineGroup 实现大纲"</span></span><span class="token punctuation">)</span>
                
                <span class="token class-name">OutlineGroup</span><span class="token punctuation">(</span>outlineModel<span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                    <span class="token class-name">Label</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>title<span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> i<span class="token punctuation">.</span>iconName<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
                
                <span class="token comment">// OutlineGroup 和 List 结合</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"OutlineGroup 和 List 结合"</span></span><span class="token punctuation">)</span>
                <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">ForEach</span><span class="token punctuation">(</span>outlineModel<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> s <span class="token keyword">in</span>
                        <span class="token class-name">Section</span> <span class="token punctuation">&#123;</span>
                            <span class="token class-name">OutlineGroup</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>children <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                                <span class="token class-name">Label</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>title<span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> i<span class="token punctuation">.</span>iconName<span class="token punctuation">)</span>
                            <span class="token punctuation">&#125;</span>
                        <span class="token punctuation">&#125;</span> header<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                            <span class="token class-name">Label</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>title<span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> s<span class="token punctuation">.</span>iconName<span class="token punctuation">)</span>
                        <span class="token punctuation">&#125;</span>

                    <span class="token punctuation">&#125;</span> <span class="token comment">// end ForEach</span>
                <span class="token punctuation">&#125;</span> <span class="token comment">// end List</span>
            <span class="token punctuation">&#125;</span> <span class="token comment">// end VStack</span>
        <span class="token punctuation">&#125;</span> <span class="token comment">// end HStack</span>
    <span class="token punctuation">&#125;</span> <span class="token comment">// end body</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// MARK: - 自定义大纲视图</span>
<span class="token keyword">struct</span> <span class="token class-name">PCOutlineListView</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token operator">></span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token keyword">where</span> <span class="token class-name">D</span><span class="token punctuation">:</span> <span class="token class-name">RandomAccessCollection</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> v<span class="token punctuation">:</span> <span class="token class-name">PCOutlineView</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token operator">></span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>d<span class="token punctuation">:</span> <span class="token class-name">D</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token class-name">KeyPath</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token operator">?></span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Content</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token class-name">PCOutlineView</span><span class="token punctuation">(</span>d<span class="token punctuation">:</span> d<span class="token punctuation">,</span> c<span class="token punctuation">:</span> c<span class="token punctuation">,</span> content<span class="token punctuation">:</span> content<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            v
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">struct</span> <span class="token class-name">PCOutlineView</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token operator">></span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token keyword">where</span> <span class="token class-name">D</span><span class="token punctuation">:</span> <span class="token class-name">RandomAccessCollection</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> d<span class="token punctuation">:</span> <span class="token class-name">D</span>
    <span class="token keyword">let</span> c<span class="token punctuation">:</span> <span class="token class-name">KeyPath</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token operator">?></span>
    <span class="token keyword">let</span> content<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Content</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> isExpanded <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 控制初始是否展开的状态</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ForEach</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
            <span class="token keyword">if</span> <span class="token keyword">let</span> sub <span class="token operator">=</span> i<span class="token punctuation">[</span>keyPath<span class="token punctuation">:</span> c<span class="token punctuation">]</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">PCDisclosureGroup</span><span class="token punctuation">(</span>content<span class="token punctuation">:</span> <span class="token class-name">PCOutlineView</span><span class="token punctuation">(</span>d<span class="token punctuation">:</span> sub<span class="token punctuation">,</span> c<span class="token punctuation">:</span> c<span class="token punctuation">,</span> content<span class="token punctuation">:</span> content<span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token function">content</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                <span class="token function">content</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span> <span class="token comment">// end if</span>
        <span class="token punctuation">&#125;</span> <span class="token comment">// end ForEach</span>
    <span class="token punctuation">&#125;</span> <span class="token comment">// end body</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">struct</span> <span class="token class-name">PCDisclosureGroup</span><span class="token operator">&lt;</span><span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token operator">></span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token keyword">where</span> <span class="token class-name">C</span><span class="token punctuation">:</span> <span class="token class-name">View</span><span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> isExpanded <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">var</span> content<span class="token punctuation">:</span> <span class="token class-name">C</span>
    <span class="token keyword">var</span> label<span class="token punctuation">:</span> <span class="token class-name">L</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">DisclosureGroup</span><span class="token punctuation">(</span>isExpanded<span class="token punctuation">:</span> $isExpanded<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            content
        <span class="token punctuation">&#125;</span> label<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Button</span> <span class="token punctuation">&#123;</span>
                isExpanded<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span> label<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                label
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">buttonStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>plain<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// MARK: - 大纲模式数据模型</span>
<span class="token keyword">struct</span> <span class="token class-name">POutlineModel</span><span class="token punctuation">:</span> <span class="token class-name">Hashable</span><span class="token punctuation">,</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token function">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> title<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token keyword">var</span> iconName<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token keyword">var</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">POutlineModel</span><span class="token punctuation">]</span><span class="token operator">?</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// MARK: - List 的抽象，数据兼容任何集合类型</span>
<span class="token keyword">struct</span> <span class="token class-name">PCustomListView</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">:</span> <span class="token class-name">RandomAccessCollection</span> <span class="token operator">&amp;</span> <span class="token class-name">MutableCollection</span> <span class="token operator">&amp;</span> <span class="token class-name">RangeReplaceableCollection</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token punctuation">:</span> <span class="token class-name">View</span><span class="token operator">></span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token keyword">where</span> <span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@Binding</span> <span class="token keyword">var</span> data<span class="token punctuation">:</span> <span class="token class-name">D</span>
    <span class="token keyword">var</span> content<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">Binding</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Content</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> data<span class="token punctuation">:</span> <span class="token class-name">Binding</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token operator">></span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">Binding</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Content</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>_data <span class="token operator">=</span> data
        <span class="token keyword">self</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Section</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span>$data<span class="token punctuation">,</span> content<span class="token punctuation">:</span> content<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span>onMove <span class="token punctuation">&#123;</span> indexSet<span class="token punctuation">,</span> offset <span class="token keyword">in</span>
                        data<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>fromOffsets<span class="token punctuation">:</span> indexSet<span class="token punctuation">,</span> toOffset<span class="token punctuation">:</span> offset<span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span>
                    <span class="token punctuation">.</span>onDelete <span class="token punctuation">&#123;</span> indexSet <span class="token keyword">in</span>
                        data<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>atOffsets<span class="token punctuation">:</span> indexSet<span class="token punctuation">)</span> <span class="token comment">// macOS 暂不支持</span>
                    <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> header<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"第一栏，共 </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data<span class="token punctuation">.</span>count</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> 项"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span> footer<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"The End"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">listStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>plain<span class="token punctuation">)</span> <span class="token comment">// 有.automatic、.inset、.plain、sidebar，macOS 暂不支持的有.grouped 和 .insetGrouped</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// MARK: - Cell 视图</span>
<span class="token keyword">struct</span> <span class="token class-name">PRowView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> s<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token keyword">var</span> i<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">HStack</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">："</span></span><span class="token punctuation">)</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// MARK: - 数据模型设计</span>
<span class="token keyword">struct</span> <span class="token class-name">PLModel</span><span class="token punctuation">:</span> <span class="token class-name">Hashable</span><span class="token punctuation">,</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> s<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token keyword">var</span> i<span class="token punctuation">:</span> <span class="token class-name">Int</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token constant">PLVM</span><span class="token punctuation">:</span> <span class="token class-name">ObservableObject</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> ls<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">PLModel</span><span class="token punctuation">]</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        ls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">PLModel</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">...</span><span class="token number">20</span> <span class="token punctuation">&#123;</span>
            ls<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">PLModel</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">,</span> i<span class="token punctuation">:</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>list 支持 Section footer。</p>
<p>list 分隔符可以自定义，使用  <code>HorizontalEdge.leading</code> 和 <code>HorizontalEdge.trailing</code> 。</p>
<p>list 不使用 UITableView 了。</p>
<p>今年 list 还新增了一个 <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/swiftui/editoperations">EditOperation</a> 可以自动生成移动和删除，新增了 edits 参数，传入 <code>[.delete, .move]</code> 数组即可。这也是一个演示如何更好扩展和配置功能的方式。</p>
<p><code>.searchable</code> 支持 token 和 scope，示例如下：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">PSearchTokensAndScopes</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">enum</span> <span class="token class-name">AttendanceScope</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">case</span> inPerson<span class="token punctuation">,</span> online
    <span class="token punctuation">&#125;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> queryText<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> queryTokens<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">InvitationToken</span><span class="token punctuation">]</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> scope<span class="token punctuation">:</span> <span class="token class-name">AttendanceScope</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token function">invitationCountView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">searchable</span><span class="token punctuation">(</span>text<span class="token punctuation">:</span> $queryText<span class="token punctuation">,</span> tokens<span class="token punctuation">:</span> $queryTokens<span class="token punctuation">,</span> scope<span class="token punctuation">:</span> $scope<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> token <span class="token keyword">in</span>
                <span class="token class-name">Label</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>diplayName<span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> token<span class="token punctuation">.</span>systemImage<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span> scopes<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"In Person"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token class-name">AttendanceScope</span><span class="token punctuation">.</span>inPerson<span class="token punctuation">)</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Online"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token class-name">AttendanceScope</span><span class="token punctuation">.</span>online<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="List-设置样式"><a href="#List-设置样式" class="headerlink" title="List-设置样式"></a>List-设置样式</h3><h4 id="内置样式"><a href="#内置样式" class="headerlink" title="内置样式"></a>内置样式</h4><p>通过 <code>.listStyle</code> 修饰符可以用系统内置样式更改 List 外观。</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
   <span class="token operator">...</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">.</span><span class="token function">listStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>sidebar<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>不同平台有不同的选项</p>
<table>
<thead>
<tr>
<th>ListStyle</th>
<th>iOS</th>
<th>macOS</th>
<th>watchOS</th>
<th>tvOS</th>
</tr>
</thead>
<tbody><tr>
<td>plain</td>
<td>iOS 13+</td>
<td>macOS 10.15+</td>
<td>watchOS 6+</td>
<td>tvOS 13+</td>
</tr>
<tr>
<td>sidebar</td>
<td>iOS 14+</td>
<td>macOS 10.15+</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>inset</td>
<td>iOS 13+</td>
<td>macOS 11.15+</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>grouped</td>
<td>iOS 13+</td>
<td>-</td>
<td>-</td>
<td>tvOS 13+</td>
</tr>
<tr>
<td>insetGrouped</td>
<td>iOS 14+</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>bordered</td>
<td>-</td>
<td>macOS 12+</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>carousel</td>
<td>-</td>
<td>-</td>
<td>watchOS 6+</td>
<td>-</td>
</tr>
<tr>
<td>elliptical</td>
<td>-</td>
<td>-</td>
<td>watchOS 7+</td>
<td>-</td>
</tr>
</tbody></table>
<h4 id="行高"><a href="#行高" class="headerlink" title="行高"></a>行高</h4><pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
  <span class="token operator">...</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">.</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>defaultMinListRowHeight<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>defaultMinListHeaderHeight<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="分隔符"><a href="#分隔符" class="headerlink" title="分隔符"></a>分隔符</h4><p>listSectionSeparator 和 listRowSeparator 隐藏行和 Section 分隔符。</p>
<p>listRowSeparatorTint 和 listSectionSeparatorTint 更改分隔符颜色</p>
<p>例如：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token punctuation">.</span><span class="token function">listRowSeparatorTint</span><span class="token punctuation">(</span><span class="token punctuation">.</span>cyan<span class="token punctuation">,</span> edges<span class="token punctuation">:</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p><code>.alternatingRowBackgrounds()</code> 可以让 List 的行底色有区分。</p>
<p>listRowBackground 调整行的背景颜色</p>
<p>更改背景颜色前需要隐藏内容背景</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
  <span class="token operator">...</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">.</span><span class="token function">scrollContentBackground</span><span class="token punctuation">(</span><span class="token punctuation">.</span>hidden<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>cyan<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这个方法同样可用于 ScrollView 和 TextEditor。</p>
<p>你可以使用 <code>.listRowBackground()</code> 修饰符来更改列表行的背景。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">..&lt;</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> index <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Row </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">listRowBackground</span><span class="token punctuation">(</span>index <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>blue <span class="token punctuation">:</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>green<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们创建了一个包含五个元素的 List。我们使用 <code>.listRowBackground()</code> 修饰符来更改每个元素的背景颜色。如果元素的索引是偶数，我们将背景颜色设置为蓝色，否则我们将背景颜色设置为绿色。</p>
<h4 id="Section"><a href="#Section" class="headerlink" title="Section"></a>Section</h4><p>你可以使用 <code>Section</code> 视图的 <code>header</code> 和 <code>footer</code> 参数来添加头部和尾部。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Section</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">..&lt;</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> index <span class="token keyword">in</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Row </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> header<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Header"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span> footer<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Footer"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>caption<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>headerProminence（.increase） 可以增加 Section Header 的大小。</p>
<h4 id="safeAreaInset"><a href="#safeAreaInset" class="headerlink" title="safeAreaInset"></a>safeAreaInset</h4><p>你可以使用 <code>.safeAreaInset()</code> 修饰符来调整视图的安全区域插入。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">..&lt;</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> index <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Row </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">safeAreaInset</span><span class="token punctuation">(</span>edge<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">,</span> spacing<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Header"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>maxWidth<span class="token punctuation">:</span> <span class="token punctuation">.</span>infinity<span class="token punctuation">,</span> alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>center<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>blue<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们创建了一个包含五个元素的 List。然后我们使用 <code>.safeAreaInset()</code> 修饰符来在 List 的顶部添加一个 Header。我们将 <code>edge</code> 参数设置为 <code>.top</code>，将 <code>spacing</code> 参数设置为 20，然后提供一个视图作为 Header。这个 Header 是一个文本视图，它的背景颜色是蓝色，前景颜色是白色，它被居中对齐，并且它的宽度和 List 的宽度相同。</p>
<h3 id="List-移动元素"><a href="#List-移动元素" class="headerlink" title="List-移动元素"></a>List-移动元素</h3><p>你可以使用 <code>.onMove(perform:)</code> 修饰符来允许用户移动 List 中的元素。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"Item 1"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 2"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 3"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 4"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 5"</span></span><span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">NavigationView</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> item <span class="token keyword">in</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
                <span class="token punctuation">.</span><span class="token function">onMove</span><span class="token punctuation">(</span>perform<span class="token punctuation">:</span> move<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span>toolbar <span class="token punctuation">&#123;</span>
                <span class="token class-name">EditButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">move</span><span class="token punctuation">(</span>from source<span class="token punctuation">:</span> <span class="token class-name">IndexSet</span><span class="token punctuation">,</span> to destination<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        items<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>fromOffsets<span class="token punctuation">:</span> source<span class="token punctuation">,</span> toOffset<span class="token punctuation">:</span> destination<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们创建了一个包含五个元素的 List。我们使用 <code>.onMove(perform:)</code> 修饰符来允许用户移动这些元素，并提供了一个 <code>move(from:to:)</code> 方法来处理移动操作。我们还添加了一个 <code>EditButton</code>，用户可以点击它来进入编辑模式，然后就可以移动元素了。</p>
<h3 id="List-搜索"><a href="#List-搜索" class="headerlink" title="List-搜索"></a>List-搜索</h3><h4 id="搜索和搜索建议"><a href="#搜索和搜索建议" class="headerlink" title="搜索和搜索建议"></a>搜索和搜索建议</h4><p>你可以使用 <code>.searchable()</code> 修饰符的 <code>suggestions</code> 参数来提供搜索建议。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> searchText <span class="token operator">=</span> <span class="token string-literal"><span class="token string">""</span></span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"Item 1"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 2"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 3"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 4"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 5"</span></span><span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">NavigationView</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> searchText<span class="token punctuation">.</span>isEmpty <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>searchText<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> item <span class="token keyword">in</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">searchable</span><span class="token punctuation">(</span>text<span class="token punctuation">:</span> $searchText<span class="token punctuation">,</span> suggestions<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span> 
                <span class="token class-name">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                    searchText <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Item 1"</span></span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item 1"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
                <span class="token class-name">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                    searchText <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Item 2"</span></span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item 2"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">navigationBarTitle</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Items"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们创建了一个包含五个元素的 List，并添加了一个搜索框。当用户在搜索框中输入文本时，List 会自动更新以显示匹配的元素。同时，我们提供了两个搜索建议 “Item 1” 和 “Item 2”，用户可以点击这些建议来快速填充搜索框。</p>
<h4 id="在列表中显示搜索建议"><a href="#在列表中显示搜索建议" class="headerlink" title="在列表中显示搜索建议"></a>在列表中显示搜索建议</h4><pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@Environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>searchSuggestionsPlacement<span class="token punctuation">)</span> <span class="token keyword">var</span> placement
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> searchText <span class="token operator">=</span> <span class="token string-literal"><span class="token string">""</span></span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"Item 1"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 2"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 3"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 4"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 5"</span></span><span class="token punctuation">]</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">NavigationView</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">SearchSuggestionView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> searchText<span class="token punctuation">.</span>isEmpty <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>searchText<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> item <span class="token keyword">in</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">searchable</span><span class="token punctuation">(</span>text<span class="token punctuation">:</span> $searchText<span class="token punctuation">,</span> suggestions<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">VStack</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                        searchText <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Item 1"</span></span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item 1"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span>
                    <span class="token class-name">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                        searchText <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Item 2"</span></span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item 2"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
                <span class="token punctuation">.</span><span class="token function">searchSuggestions</span><span class="token punctuation">(</span><span class="token punctuation">.</span>hidden<span class="token punctuation">,</span> <span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token punctuation">.</span>content<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">navigationBarTitle</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Items"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token attribute atrule">@ViewBuilder</span>
    <span class="token keyword">func</span> <span class="token function-definition function">SearchSuggestionView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> placement <span class="token operator">==</span> <span class="token punctuation">.</span>content <span class="token punctuation">&#123;</span>
            <span class="token class-name">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                searchText <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Item 1"</span></span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item 1"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
            <span class="token class-name">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                searchText <span class="token operator">=</span> <span class="token string-literal"><span class="token string">"Item 2"</span></span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item 2"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="搜索状态"><a href="#搜索状态" class="headerlink" title="搜索状态"></a>搜索状态</h4><p>搜索中</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token attribute atrule">@Environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>isSearching<span class="token punctuation">)</span> <span class="token keyword">var</span> isSearching<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>关闭搜索</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token attribute atrule">@Environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>dismissSearch<span class="token punctuation">)</span> <span class="token keyword">var</span> dismissSearch<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>提交搜索</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">.</span><span class="token function">searchable</span><span class="token punctuation">(</span>text<span class="token punctuation">:</span> $vm<span class="token punctuation">.</span>searchTerm<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">onSubmit</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token punctuation">.</span>search<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//...</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="搜索栏外观"><a href="#搜索栏外观" class="headerlink" title="搜索栏外观"></a>搜索栏外观</h4><p>占位文字说明</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token punctuation">.</span><span class="token function">searchable</span><span class="token punctuation">(</span>text<span class="token punctuation">:</span> $wwdcVM<span class="token punctuation">.</span>searchText<span class="token punctuation">,</span> prompt<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"搜索 WWDC Session 内容"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>一直显示搜索栏</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token punctuation">.</span><span class="token function">searchable</span><span class="token punctuation">(</span>text<span class="token punctuation">:</span> $wwdcVM<span class="token punctuation">.</span>searchText<span class="token punctuation">,</span> 
            placement<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">navigationBarDrawer</span><span class="token punctuation">(</span>displayMode<span class="token punctuation">:</span><span class="token punctuation">.</span>always<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>更改搜索栏的位置</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token punctuation">.</span><span class="token function">searchable</span><span class="token punctuation">(</span>text<span class="token punctuation">:</span> $wwdcVM<span class="token punctuation">.</span>searchText<span class="token punctuation">,</span> placement<span class="token punctuation">:</span> <span class="token punctuation">.</span>sidebar<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="搜索去抖动"><a href="#搜索去抖动" class="headerlink" title="搜索去抖动"></a>搜索去抖动</h4><p>你可以使用 Combine 框架来实现搜索的去抖动功能。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span>
<span class="token keyword">import</span> <span class="token class-name">Combine</span>

<span class="token keyword">class</span> <span class="token class-name">SearchViewModel</span><span class="token punctuation">:</span> <span class="token class-name">ObservableObject</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> searchText <span class="token operator">=</span> <span class="token string-literal"><span class="token string">""</span></span>
    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> searchResults<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">private</span> <span class="token keyword">var</span> cancellables <span class="token operator">=</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token class-name">AnyCancellable</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        $searchText
            <span class="token punctuation">.</span><span class="token function">debounce</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">milliseconds</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> scheduler<span class="token punctuation">:</span> <span class="token class-name">RunLoop</span><span class="token punctuation">.</span>main<span class="token punctuation">)</span>
            <span class="token punctuation">.</span>sink <span class="token punctuation">&#123;</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span> <span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span>cancellables<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">search</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> text<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 这里是你的搜索逻辑</span>
        <span class="token comment">// 例如，你可以从一个数组中过滤出匹配的元素</span>
        <span class="token keyword">let</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"Item 1"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 2"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 3"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 4"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 5"</span></span><span class="token punctuation">]</span>
        searchResults <span class="token operator">=</span> items<span class="token punctuation">.</span>filter <span class="token punctuation">&#123;</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@StateObject</span> <span class="token keyword">private</span> <span class="token keyword">var</span> viewModel <span class="token operator">=</span> <span class="token class-name">SearchViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">VStack</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Search"</span></span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> $viewModel<span class="token punctuation">.</span>searchText<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token class-name">List</span><span class="token punctuation">(</span>viewModel<span class="token punctuation">.</span>searchResults<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> result <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们创建了一个 <code>SearchViewModel</code> 类，它有一个 <code>searchText</code> 属性和一个 <code>searchResults</code> 属性。当 <code>searchText</code> 属性的值发生变化时，我们使用 Combine 的 <code>debounce(for:scheduler:)</code> 方法来延迟执行搜索操作，从而实现去抖动功能。然后我们在 <code>ContentView</code> 中使用这个 <code>SearchViewModel</code> 来显示搜索框和搜索结果。</p>
<h3 id="List-下拉刷新"><a href="#List-下拉刷新" class="headerlink" title="List-下拉刷新"></a>List-下拉刷新</h3><p>你可以使用 <code>.refreshable()</code> 修饰符来添加下拉刷新功能。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"Item 1"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 2"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 3"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 4"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 5"</span></span><span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> item <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span>refreshable <span class="token punctuation">&#123;</span>
            <span class="token keyword">await</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">func</span> <span class="token function-definition function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 这里是你的刷新逻辑</span>
        <span class="token comment">// 例如，你可以从网络获取新的数据，然后更新 items 数组</span>
        <span class="token comment">// 这里我们只是简单地将 items 数组反转</span>
        items<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们创建了一个包含五个元素的 List，并添加了下拉刷新功能。当用户下拉 List 时，<code>refresh()</code> 方法会被调用，然后我们将 items 数组反转，从而模拟刷新操作。注意，<code>refresh()</code> 方法需要是一个异步方法，因为刷新操作通常需要一些时间来完成。</p>
<h3 id="List-轻扫操作"><a href="#List-轻扫操作" class="headerlink" title="List-轻扫操作"></a>List-轻扫操作</h3><p>你可以使用 <code>.swipeActions()</code> 修饰符来添加轻扫操作。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"Item 1"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 2"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 3"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 4"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Item 5"</span></span><span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> item <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
                <span class="token punctuation">.</span>swipeActions <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                        <span class="token comment">// 这里是你的删除操作</span>
                        <span class="token keyword">if</span> <span class="token keyword">let</span> index <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">firstIndex</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> item<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                            items<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> index<span class="token punctuation">)</span>
                        <span class="token punctuation">&#125;</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        <span class="token class-name">Label</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Delete"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"trash"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span>
                    <span class="token punctuation">.</span><span class="token function">tint</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们创建了一个包含五个元素的 List，并为每个元素添加了一个滑动操作。当用户向左轻扫一个元素时，会显示一个 “Delete” 按钮，用户可以点击这个按钮来删除该元素。</p>
<h3 id="List-大纲视图"><a href="#List-大纲视图" class="headerlink" title="List-大纲视图"></a>List-大纲视图</h3><h4 id="List-树状结构"><a href="#List-树状结构" class="headerlink" title="List 树状结构"></a>List 树状结构</h4><p>通过 children 参数指定子树路径。</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token class-name">List</span><span class="token punctuation">(</span>outlineModel<span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
    <span class="token class-name">Label</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>title<span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> i<span class="token punctuation">.</span>iconName<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h4 id="DisclosureGroup-实现展开和折叠"><a href="#DisclosureGroup-实现展开和折叠" class="headerlink" title="DisclosureGroup 实现展开和折叠"></a>DisclosureGroup 实现展开和折叠</h4><p><code>DisclosureGroup</code> 视图可以用来创建一个可以展开和折叠的内容区域。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> isExpanded <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">DisclosureGroup</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Options"</span></span><span class="token punctuation">,</span> isExpanded<span class="token punctuation">:</span> $isExpanded<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Option 1"</span></span><span class="token punctuation">)</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Option 2"</span></span><span class="token punctuation">)</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Option 3"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们创建了一个 <code>DisclosureGroup</code> 视图，它的标题是 “Options”，并且它包含三个选项。我们使用一个 <code>@State</code> 属性 <code>isExpanded</code> 来控制 <code>DisclosureGroup</code> 视图是否展开。当用户点击标题时，<code>DisclosureGroup</code> 视图会自动展开或折叠，同时 <code>isExpanded</code> 属性的值也会相应地改变。</p>
<h4 id="OutlineGroup-创建大纲视图"><a href="#OutlineGroup-创建大纲视图" class="headerlink" title="OutlineGroup 创建大纲视图"></a>OutlineGroup 创建大纲视图</h4><p>可以使用 <code>OutlineGroup</code> 视图来创建一个大纲视图。以下是一个例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">OutlineGroup</span><span class="token punctuation">(</span>sampleData<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> item <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">struct</span> <span class="token class-name">Item</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token function">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token keyword">var</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Item</span><span class="token punctuation">]</span><span class="token operator">?</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">let</span> sampleData<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Item</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token class-name">Item</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Parent 1"</span></span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token class-name">Item</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Child 1"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Item</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Child 2"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">Item</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Parent 2"</span></span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token class-name">Item</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Child 3"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Item</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Child 4"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们创建了一个 <code>Item</code> 结构体，它有一个 <code>name</code> 属性和一个 <code>children</code> 属性。然后我们创建了一个 <code>sampleData</code> 数组，它包含两个父项，每个父项都有两个子项。最后我们在 <code>ContentView</code> 中使用 <code>OutlineGroup</code> 视图来显示这个数组，每个父项和子项都显示为一个文本视图。</p>
<h4 id="结合-OutlineGroup-和-DisclosureGroup-实现自定义可折叠大纲视图"><a href="#结合-OutlineGroup-和-DisclosureGroup-实现自定义可折叠大纲视图" class="headerlink" title="结合 OutlineGroup 和 DisclosureGroup 实现自定义可折叠大纲视图"></a>结合 OutlineGroup 和 DisclosureGroup 实现自定义可折叠大纲视图</h4><p>代码如下：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">SPOutlineListView</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token operator">></span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token keyword">where</span> <span class="token class-name">D</span><span class="token punctuation">:</span> <span class="token class-name">RandomAccessCollection</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> v<span class="token punctuation">:</span> <span class="token class-name">SPOutlineView</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token operator">></span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>d<span class="token punctuation">:</span> <span class="token class-name">D</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token class-name">KeyPath</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token operator">?></span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Content</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>v <span class="token operator">=</span> <span class="token class-name">SPOutlineView</span><span class="token punctuation">(</span>d<span class="token punctuation">:</span> d<span class="token punctuation">,</span> c<span class="token punctuation">:</span> c<span class="token punctuation">,</span> content<span class="token punctuation">:</span> content<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            v
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">struct</span> <span class="token class-name">SPOutlineView</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token operator">></span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token keyword">where</span> <span class="token class-name">D</span><span class="token punctuation">:</span> <span class="token class-name">RandomAccessCollection</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> d<span class="token punctuation">:</span> <span class="token class-name">D</span>
    <span class="token keyword">let</span> c<span class="token punctuation">:</span> <span class="token class-name">KeyPath</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token operator">?></span>
    <span class="token keyword">let</span> content<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">D</span><span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Content</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> isExpanded <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 控制初始是否展开的状态</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ForEach</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
            <span class="token keyword">if</span> <span class="token keyword">let</span> sub <span class="token operator">=</span> i<span class="token punctuation">[</span>keyPath<span class="token punctuation">:</span> c<span class="token punctuation">]</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">SPDisclosureGroup</span><span class="token punctuation">(</span>content<span class="token punctuation">:</span> <span class="token class-name">SPOutlineView</span><span class="token punctuation">(</span>d<span class="token punctuation">:</span> sub<span class="token punctuation">,</span> c<span class="token punctuation">:</span> c<span class="token punctuation">,</span> content<span class="token punctuation">:</span> content<span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token function">content</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                <span class="token function">content</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span> <span class="token comment">// end if</span>
        <span class="token punctuation">&#125;</span> <span class="token comment">// end ForEach</span>
    <span class="token punctuation">&#125;</span> <span class="token comment">// end body</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">struct</span> <span class="token class-name">SPDisclosureGroup</span><span class="token operator">&lt;</span><span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token operator">></span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token keyword">where</span> <span class="token class-name">C</span><span class="token punctuation">:</span> <span class="token class-name">View</span><span class="token punctuation">,</span> <span class="token class-name">L</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> isExpanded <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">var</span> content<span class="token punctuation">:</span> <span class="token class-name">C</span>
    <span class="token keyword">var</span> label<span class="token punctuation">:</span> <span class="token class-name">L</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">DisclosureGroup</span><span class="token punctuation">(</span>isExpanded<span class="token punctuation">:</span> $isExpanded<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            content
        <span class="token punctuation">&#125;</span> label<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Button</span> <span class="token punctuation">&#123;</span>
                withAnimation <span class="token punctuation">&#123;</span>
                    isExpanded<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> label<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
                label
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">buttonStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>plain<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="List-完全可点击的行"><a href="#List-完全可点击的行" class="headerlink" title="List-完全可点击的行"></a>List-完全可点击的行</h3><p>使用 <code>.contentShape(Rectangle())</code> 可以使整个区域都可点击 </p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">..&lt;</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> num <span class="token keyword">in</span>
                <span class="token class-name">HStack</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">num</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                    <span class="token class-name">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
                <span class="token punctuation">.</span><span class="token function">contentShape</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span>onTapGesture <span class="token punctuation">&#123;</span>
                    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Clicked </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">num</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span> <span class="token comment">// end list</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="List-索引标题"><a href="#List-索引标题" class="headerlink" title="List-索引标题"></a>List-索引标题</h3><p>这个代码是在创建一个带有索引标题的列表，用户可以通过拖动索引标题来快速滚动列表。</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span>

<span class="token operator">...</span>

<span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
  <span class="token operator">...</span>
  <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">ScrollViewReader</span> <span class="token punctuation">&#123;</span> proxy <span class="token keyword">in</span>
      <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ArticleListView</span>
      <span class="token punctuation">&#125;</span>
      <span class="token punctuation">.</span><span class="token function">listStyle</span><span class="token punctuation">(</span><span class="token class-name">InsetGroupedListStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">overlay</span><span class="token punctuation">(</span><span class="token class-name">IndexView</span><span class="token punctuation">(</span>proxy<span class="token punctuation">:</span> proxy<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token operator">...</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">struct</span> <span class="token class-name">IndexView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">let</span> proxy<span class="token punctuation">:</span> <span class="token class-name">ScrollViewProxy</span>
  <span class="token keyword">let</span> titles<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span>
  <span class="token attribute atrule">@GestureState</span> <span class="token keyword">private</span> <span class="token keyword">var</span> dragLocation<span class="token punctuation">:</span> <span class="token class-name">CGPoint</span> <span class="token operator">=</span> <span class="token punctuation">.</span>zero

  <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">VStack</span> <span class="token punctuation">&#123;</span>
      <span class="token class-name">ForEach</span><span class="token punctuation">(</span>titles<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> title <span class="token keyword">in</span>
        <span class="token class-name">TitleView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token function">drag</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> title<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token punctuation">.</span><span class="token function">gesture</span><span class="token punctuation">(</span>
      <span class="token class-name">DragGesture</span><span class="token punctuation">(</span>minimumDistance<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> coordinateSpace<span class="token punctuation">:</span> <span class="token punctuation">.</span>global<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">updating</span><span class="token punctuation">(</span>$dragLocation<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> value<span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span>
          state <span class="token operator">=</span> value<span class="token punctuation">.</span>location
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">func</span> <span class="token function-definition function">drag</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">GeometryReader</span> <span class="token punctuation">&#123;</span> geometry <span class="token keyword">in</span>
      <span class="token function">drag</span><span class="token punctuation">(</span>geometry<span class="token punctuation">:</span> geometry<span class="token punctuation">,</span> title<span class="token punctuation">:</span> title<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">func</span> <span class="token function-definition function">drag</span><span class="token punctuation">(</span>geometry<span class="token punctuation">:</span> <span class="token class-name">GeometryProxy</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> geometry<span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token punctuation">.</span>global<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>dragLocation<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">&#123;</span>
        proxy<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> anchor<span class="token punctuation">:</span> <span class="token punctuation">.</span>center<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>clear<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
  <span class="token operator">...</span>
<span class="token punctuation">&#125;</span>
<span class="token operator">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>上面代码中 <code>ContentView</code> 是主视图，它包含一个 <code>List</code> 和一个 <code>IndexView</code>。<code>List</code> 中的内容由 <code>ArticleListView</code> 提供。<code>IndexView</code> 是一个自定义视图，它显示了所有的索引标题。</p>
<p><code>IndexView</code> 接受一个 <code>ScrollViewProxy</code> 和一个标题数组。它使用 <code>VStack</code> 和 <code>ForEach</code> 来创建一个垂直的索引标题列表。每个标题都是一个 <code>TitleView</code>，并且它有一个背景，这个背景是通过 <code>drag(title:)</code> 方法创建的。</p>
<p><code>drag(title:)</code> 方法接受一个标题，并返回一个视图。这个视图是一个 <code>GeometryReader</code>，它可以获取其包含的视图的几何信息。然后，这个 <code>GeometryReader</code> 使用 <code>drag(geometry:title:)</code> 方法来创建一个新的视图。</p>
<p><code>drag(geometry:title:)</code> 方法接受一个 <code>GeometryProxy</code> 和一个标题，并返回一个视图。如果 <code>GeometryProxy</code> 的全局帧包含当前的拖动位置，那么这个方法将返回一个特定的视图。</p>
<p><code>IndexView</code> 还有一个手势，这个手势是一个 <code>DragGesture</code>。当用户拖动索引标题时，这个手势会更新 <code>dragLocation</code> 属性的值，这个属性是一个 <code>@GestureState</code> 属性，它表示当前的拖动位置。</p>
<h3 id="List-加载更多"><a href="#List-加载更多" class="headerlink" title="List-加载更多"></a>List-加载更多</h3><p>你可以通过检测列表滚动到底部来实现加载更多的功能。以下是一个简单的例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">..&lt;</span><span class="token number">20</span><span class="token punctuation">)</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> item <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">item</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span>onAppear <span class="token punctuation">&#123;</span>
                        <span class="token keyword">if</span> item <span class="token operator">==</span> items<span class="token punctuation">.</span>last <span class="token punctuation">&#123;</span>
                            <span class="token function">loadMore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">&#125;</span>
                    <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">onAppear</span><span class="token punctuation">(</span>perform<span class="token punctuation">:</span> loadMore<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">func</span> <span class="token function-definition function">loadMore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">asyncAfter</span><span class="token punctuation">(</span>deadline<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">let</span> newItems <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>count<span class="token operator">..&lt;</span><span class="token keyword">self</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>contentsOf<span class="token punctuation">:</span> newItems<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们创建了一个包含多个元素的 List。当 List 出现最后一项时，我们调用 <code>loadMore</code> 方法来加载更多的元素。在 <code>loadMore</code> 方法中，模拟在一秒后添加新的元素到 <code>items</code> 数组中。</p>
<p>请注意，这只是一个基本的使用示例，实际的使用方式可能会根据你的需求而变化。例如，你可能需要从网络获取新的元素，而不是像这个例子中那样直接创建新的元素。</p>
<h2 id="Lazy容器"><a href="#Lazy容器" class="headerlink" title="Lazy容器"></a>Lazy容器</h2><h3 id="LazyVStack和LazyHStack"><a href="#LazyVStack和LazyHStack" class="headerlink" title="LazyVStack和LazyHStack"></a>LazyVStack和LazyHStack</h3><p>LazyVStack 和 LazyHStack 里的视图只有在滚到时才会被创建。</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">PlayLazyVStackAndLazyHStackView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ScrollView</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">LazyVStack</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">300</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                    <span class="token class-name">PLHSRowView</span><span class="token punctuation">(</span>i<span class="token punctuation">:</span> i<span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">struct</span> <span class="token class-name">PLHSRowView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> i<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"第 </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> 个"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span>i<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"第 </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> 个初始化了"</span></span><span class="token punctuation">)</span> <span class="token comment">// 用来查看什么时候创建的。</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>i <span class="token operator">=</span> i
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="LazyVGrid和LazyHGrid"><a href="#LazyVGrid和LazyHGrid" class="headerlink" title="LazyVGrid和LazyHGrid"></a>LazyVGrid和LazyHGrid</h3><p><img  srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20300'%3E%3C/svg%3E" data-src="https://ming1016.github.io/qdimg/240505/lazyvgridandlazyhgrid-ap01.jpeg" class="lozad post-image"src="https://ming1016.github.io/qdimg/240505/lazyvgridandlazyhgrid-ap01.jpeg"></p>
<p>列的设置有三种，这三种也可以组合用。</p>
<ul>
<li>GridItem(.fixed(10)) 会固定设置有多少列。</li>
<li>GridItem(.flexible()) 会充满没有使用的空间。</li>
<li>GridItem(.adaptive(minimum: 10)) 表示会根据设置大小自动设置有多少列展示。</li>
</ul>
<p>示例：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">PlayLazyVGridAndLazyHGridView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> colors<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">:</span><span class="token class-name">Color</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string-literal"><span class="token string">"red"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>red<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"orange"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>orange<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"yellow"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>yellow<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"green"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>green<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"mint"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>mint<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"teal"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>teal<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"cyan"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>cyan<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"blue"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>blue<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"indigo"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>indigo<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"purple"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>purple<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"pink"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>pink<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"brown"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>brown<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"gray"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>gray<span class="token punctuation">,</span>
        <span class="token string-literal"><span class="token string">"black"</span></span> <span class="token punctuation">:</span> <span class="token punctuation">.</span>black
    <span class="token punctuation">]</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">ScrollView</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">LazyVGrid</span><span class="token punctuation">(</span>columns<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token class-name">GridItem</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">adaptive</span><span class="token punctuation">(</span>minimum<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> spacing<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span> pinnedViews<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span>sectionHeaders<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Section</span><span class="token punctuation">(</span>header<span class="token punctuation">:</span>
                            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"🎨调色板"</span></span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>maxWidth<span class="token punctuation">:</span> <span class="token punctuation">.</span>infinity<span class="token punctuation">,</span> maxHeight<span class="token punctuation">:</span> <span class="token punctuation">.</span>infinity<span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">RoundedRectangle</span><span class="token punctuation">(</span>cornerRadius<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span>
                                                <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">.</span>black<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">(</span>colors<span class="token punctuation">.</span>keys<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> k <span class="token keyword">in</span>
                        colors<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span><span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token operator">...</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">overlay</span><span class="token punctuation">(</span>
                                <span class="token class-name">Text</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>
                            <span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">shadow</span><span class="token punctuation">(</span>color<span class="token punctuation">:</span> <span class="token punctuation">.</span>black<span class="token punctuation">,</span> radius<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token class-name">LazyVGrid</span><span class="token punctuation">(</span>columns<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token class-name">GridItem</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">adaptive</span><span class="token punctuation">(</span>minimum<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> spacing<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Section</span><span class="token punctuation">(</span>header<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"图标集"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">30</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                        <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"p</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">resizable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">aspectRatio</span><span class="token punctuation">(</span>contentMode<span class="token punctuation">:</span> <span class="token punctuation">.</span>fit<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">shadow</span><span class="token punctuation">(</span>color<span class="token punctuation">:</span> <span class="token punctuation">.</span>black<span class="token punctuation">,</span> radius<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Grid"><a href="#Grid" class="headerlink" title="Grid"></a>Grid</h2><p>Grid 会将最大的一个单元格大小应用于所有单元格</p>
<p>代码例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Grid</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>center<span class="token punctuation">,</span>
             horizontalSpacing<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
             verticalSpacing<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">GridRow</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Tropical"</span></span><span class="token punctuation">)</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Mango"</span></span><span class="token punctuation">)</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Pineapple"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">gridCellColumns</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
            <span class="token class-name">GridRow</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Leafy"</span></span><span class="token punctuation">)</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Spinach"</span></span><span class="token punctuation">)</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Kale"</span></span><span class="token punctuation">)</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Lettuce"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>gridCellAnchor</code> 可以让 GridRow 给自己设置对齐方式。</p>
<p><code>gridCellColumns()</code>  modifier 可以让一个单元格跨多列。</p>
<p>GridRow 的间距通过 Grid 的 <code>horizontalSpacing</code> 和 <code>verticalSpacing</code> 参数来控制。</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> numbers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Grid</span><span class="token punctuation">(</span>horizontalSpacing<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> verticalSpacing<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span>numbers<span class="token punctuation">.</span>indices<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> i <span class="token keyword">in</span>
                <span class="token class-name">GridRow</span> <span class="token punctuation">&#123;</span>
                    <span class="token class-name">ForEach</span><span class="token punctuation">(</span>numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>indices<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> j <span class="token keyword">in</span>
                        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>maxWidth<span class="token punctuation">:</span> <span class="token punctuation">.</span>infinity<span class="token punctuation">,</span> maxHeight<span class="token punctuation">:</span> <span class="token punctuation">.</span>infinity<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>gray<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">border</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>gray<span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">)</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>按照以上代码这样写，每个数字 GridRow 之间的间隔就是0了。</p>
<p>空白的单元格可以这样写：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token class-name">Color</span><span class="token punctuation">.</span>clear
    <span class="token punctuation">.</span><span class="token function">gridCellUnsizedAxes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span> <span class="token punctuation">.</span>vertical<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>




<h2 id="Table表格"><a href="#Table表格" class="headerlink" title="Table表格"></a>Table表格</h2><h3 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h3><p>今年 iOS 和 iPadOS 也可以使用去年只能在 macOS 上使用的 Table了，据 digital lounges 里说，iOS table 的性能和 list 差不多，table 默认为 plian list。我想 iOS 上加上 table 只是为了兼容 macOS 代码吧。</p>
<p>table 使用示例如下：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token class-name">Fruit</span><span class="token punctuation">.</span><span class="token function">simpleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">TableColumn</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"名字"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
            <span class="token class-name">TableColumn</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"颜色"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span>
            <span class="token class-name">TableColumn</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"颜色"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token short-argument">$0</span><span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>footnote<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>cyan<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">contextMenu</span><span class="token punctuation">(</span>forSelectionType<span class="token punctuation">:</span> <span class="token class-name">Fruit</span><span class="token punctuation">.</span><span class="token constant">ID</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> selection <span class="token keyword">in</span>
            <span class="token keyword">if</span> selection<span class="token punctuation">.</span>isEmpty <span class="token punctuation">&#123;</span>
                <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"添加"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// ...</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> selection<span class="token punctuation">.</span>count <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"收藏"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// ...</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"收藏多个"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// ...</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token keyword">struct</span> <span class="token class-name">Fruit</span><span class="token punctuation">:</span><span class="token class-name">Identifiable</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span>
        <span class="token keyword">let</span> color<span class="token punctuation">:</span> <span class="token class-name">String</span>
        
        <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">simpleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">Fruit</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Fruit</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            re<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Apple"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Red"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            re<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Banana"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Yellow"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            re<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Cherry"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Red"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            re<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Date"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Brown"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            re<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Elderberry"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Purple"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> re
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="Table-样式"><a href="#Table-样式" class="headerlink" title="Table-样式"></a>Table-样式</h3><p>在 SwiftUI 中，<code>Table</code> 视图的 <code>.tableStyle</code> 修改器可以用来设置表格的样式。目前，SwiftUI 提供了以下几种表格样式：</p>
<ul>
<li>inset：默认</li>
<li><code>inset(alternatesRowBackgrounds: Bool)</code>：是否开启行交错背景</li>
<li>bordered：加边框</li>
<li><code>bordered(alternatesRowBackgrounds: Bool)</code>： 是否开启行交错背景</li>
</ul>
<p>你可以使用 <code>.tableStyle</code> 修改器来设置表格的样式，例如：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token class-name">Table</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">.</span><span class="token function">tableStyle</span><span class="token punctuation">(</span><span class="token class-name">InsetGroupedListStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>这段代码会将表格的样式设置为 <code>InsetGroupedListStyle</code>。</p>
<h3 id="Table-行的选择"><a href="#Table-行的选择" class="headerlink" title="Table-行的选择"></a>Table-行的选择</h3><p>你可以使用 Table 视图的 selection 参数来实现单选和多选。selection 参数接受一个绑定到一个可选的 Set 的变量，这个 Set 包含了被选中的元素的标识。</p>
<p>以下是一个使用 Table 视图实现单选和多选的例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> selectionOne<span class="token punctuation">:</span> <span class="token constant">UUID</span><span class="token operator">?</span> <span class="token comment">// 单选</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> selection<span class="token punctuation">:</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token constant">UUID</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 多选</span>

    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Apple"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Red"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Banana"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Yellow"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Cherry"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Red"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Date"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Brown"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Elderberry"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Purple"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Table</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> selection<span class="token punctuation">:</span> $selectionOne<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">TableColumn</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Fruit"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> item <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
            <span class="token class-name">TableColumn</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Color"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> item <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>color<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">struct</span> <span class="token class-name">Fruit</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token keyword">let</span> color<span class="token punctuation">:</span> <span class="token class-name">String</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们首先定义了一个 @State 变量 selection，它是一个 Set，包含了被选中的元素的标识。然后，我们将这个变量绑定到 Table 视图的 selection 参数。</p>
<p>现在，当用户选择或取消选择一个元素时，selection 变量就会被更新。你可以使用这个变量来判断哪些元素被选中，或者实现其他的交互功能。</p>
<h3 id="Table-多属性排序"><a href="#Table-多属性排序" class="headerlink" title="Table-多属性排序"></a>Table-多属性排序</h3><p>你可以使用 <code>Table</code> 视图的 <code>sortOrder</code> 参数来实现多属性排序。<code>sortOrder</code> 参数接受一个绑定到一个 <code>SortDescriptor</code> 数组的变量，这个数组定义了排序的顺序和方式。</p>
<p>以下是一个使用 <code>Table</code> 视图实现多属性排序的例子：</p>
<pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> sortOrder<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">KeyPathComparator</span><span class="token operator">&lt;</span><span class="token class-name">Fruit</span><span class="token operator">></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> order<span class="token punctuation">:</span> <span class="token punctuation">.</span>reverse<span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Apple"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Red"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Banana"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Yellow"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Cherry"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Red"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Date"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Brown"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Fruit</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Elderberry"</span></span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Purple"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token function">sortKeyPathView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 排序状态</span>
        <span class="token class-name">Table</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> sortOrder<span class="token punctuation">:</span> $sortOrder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">TableColumn</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Fruit"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
            <span class="token class-name">TableColumn</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Color"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span>
            <span class="token comment">// 不含 value 参数的不支持排序</span>
            <span class="token class-name">TableColumn</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"ColorNoOrder"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation"><span class="token short-argument">$0</span><span class="token punctuation">.</span>color</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>footnote<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>mint<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span>task <span class="token punctuation">&#123;</span>
            data<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>using<span class="token punctuation">:</span> sortOrder<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> sortOrder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> oldValue<span class="token punctuation">,</span> newValue <span class="token keyword">in</span>
            data<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>using<span class="token punctuation">:</span> newValue<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token attribute atrule">@ViewBuilder</span>
    <span class="token keyword">func</span> <span class="token function-definition function">sortKeyPathView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">HStack</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span>sortOrder<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> order <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span>keyPath <span class="token operator">==</span> <span class="token punctuation">\</span><span class="token class-name">Fruit</span><span class="token punctuation">.</span>name <span class="token operator">?</span> <span class="token string-literal"><span class="token string">"名字"</span></span> <span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"颜色"</span></span><span class="token punctuation">)</span>
                <span class="token class-name">Image</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span> order<span class="token punctuation">.</span>order <span class="token operator">==</span> <span class="token punctuation">.</span>reverse <span class="token operator">?</span> <span class="token string-literal"><span class="token string">"chevron.down"</span></span> <span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"chevron.up"</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>top<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">struct</span> <span class="token class-name">Fruit</span><span class="token punctuation">:</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token keyword">let</span> color<span class="token punctuation">:</span> <span class="token class-name">String</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们首先定义了一个 <code>@State</code> 变量 <code>sortOrder</code>，它是一个 <code>SortDescriptor</code> 数组，定义了排序的顺序和方式。然后，我们将这个变量绑定到 <code>Table</code> 视图的 <code>sortOrder</code> 参数。</p>
<p>现在，当用户点击表头来排序一个列时，<code>sortOrder</code> 变量就会被更新。你可以使用这个变量来实现多属性排序，或者实现其他的交互功能。</p>
<h3 id="Table-contextMenu"><a href="#Table-contextMenu" class="headerlink" title="Table-contextMenu"></a>Table-contextMenu</h3><pre class="line-numbers language-swift" data-language="swift"><code class="language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> selection<span class="token punctuation">:</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token constant">UUID</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token class-name">Fruit</span><span class="token punctuation">.</span><span class="token function">simpleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> selection<span class="token punctuation">:</span> $selection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token operator">...</span>
        <span class="token punctuation">&#125;</span>
        <span class="token punctuation">.</span><span class="token function">contextMenu</span><span class="token punctuation">(</span>forSelectionType<span class="token punctuation">:</span> <span class="token class-name">Fruit</span><span class="token punctuation">.</span><span class="token constant">ID</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> selection <span class="token keyword">in</span>
            <span class="token keyword">if</span> selection<span class="token punctuation">.</span>isEmpty <span class="token punctuation">&#123;</span>
                <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"添加"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// ...</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> selection<span class="token punctuation">.</span>count <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"收藏"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// ...</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"收藏多个"</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// ...</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span> primaryAction<span class="token punctuation">:</span> <span class="token punctuation">&#123;</span> items <span class="token keyword">in</span>
            <span class="token comment">// 双击某一行时</span>
            <span class="token function">debugPrint</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token operator">...</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


  </div>
  <div>
  
  <div class="post-note note-warning copyright" style="margin-top: 42px">
    <p><span style="font-weight: bold;">作者：</span><a target="_blank" rel="nofollow noopener noreferrer" href="https://starming.com/about">戴铭</a></p>
    <p><span style="font-weight: bold;">文章链接：</span><a target="_blank" rel="nofollow noopener noreferrer" href="https://starming.com/2024/05/18/pamphlet-series-listdataview/">https://starming.com/2024/05/18/pamphlet-series-listdataview/</a></p>
    <p><span style="font-weight: bold;">版权声明：</span>本博客所有文章除特别声明外，均采用<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0 协议</a>。转载请注明出处！</p>
  </div>
  
  </div>
</article>
<div class="nav">
  
  <div class="nav-item-prev">
    <a href="/2024/05/18/pamphlet-series-layout/" class="nav-link">
      <i class="iconfont icon-left nav-prev-icon"></i>
      <div>
        <div class="nav-label">Prev</div>
        
        <div class="nav-title">小册子之详说 Navigation、ViewThatFits、Layout 协议等布局 SwiftUI 组件 </div>
        
      </div>
    </a>
  </div>
  
  
  <div class="nav-item-next">
    <a href="/2024/05/18/pamphlet-series-widget/" class="nav-link">
      <div>
        <div class="nav-label">Next</div>
        
        <div class="nav-title">小册子之简说 Widget 小组件 </div>
        
      </div>
      <i class="iconfont icon-right nav-next-icon"></i>
    </a>
  </div>
  
</div>

<div class="card card-content toc-card" id="mobiletoc">
  <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>TOC</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ForEach"><span class="toc-number">1.</span> <span class="toc-text">ForEach</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E8%8C%83%E5%9B%B4%E8%BF%9B%E8%A1%8C%E7%BC%96%E5%8F%B7"><span class="toc-number">1.2.</span> <span class="toc-text">使用索引范围进行编号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-enumerated-%E7%BC%96%E5%8F%B7"><span class="toc-number">1.3.</span> <span class="toc-text">使用 enumerated 编号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-zip-%E7%BC%96%E5%8F%B7"><span class="toc-number">1.4.</span> <span class="toc-text">使用 zip 编号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scroll%E8%A7%86%E5%9B%BE"><span class="toc-number">2.</span> <span class="toc-text">Scroll视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ScrollView"><span class="toc-number">2.1.</span> <span class="toc-text">ScrollView</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E-modifier"><span class="toc-number">2.1.1.</span> <span class="toc-text">新增 modifier</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ScrollViewReader"><span class="toc-number">2.1.2.</span> <span class="toc-text">ScrollViewReader</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BA%E5%AE%9A%E5%88%B0%E6%BB%9A%E5%8A%A8%E8%A7%86%E5%9B%BE%E7%9A%84%E9%A1%B6%E9%83%A8"><span class="toc-number">2.2.</span> <span class="toc-text">固定到滚动视图的顶部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%9A%E5%8A%A8%E5%88%B0%E7%89%B9%E5%AE%9A%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">2.3.</span> <span class="toc-text">滚动到特定的位置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#scrollPostion-%E7%89%88%E6%9C%AC"><span class="toc-number">2.3.1.</span> <span class="toc-text">scrollPostion 版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ScrollViewReader-%E7%89%88%E6%9C%AC"><span class="toc-number">2.3.2.</span> <span class="toc-text">ScrollViewReader 版本</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scrollTargetBehavior%E5%88%86%E9%A1%B5%E6%BB%9A%E5%8A%A8"><span class="toc-number">2.4.</span> <span class="toc-text">scrollTargetBehavior分页滚动</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E5%8F%AF%E8%A7%86%E5%B0%BA%E5%AF%B8%E5%88%86%E9%A1%B5"><span class="toc-number">2.4.1.</span> <span class="toc-text">按可视尺寸分页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E5%AE%B9%E5%99%A8%E5%85%83%E7%B4%A0%E5%AF%B9%E9%BD%90%E5%88%86%E9%A1%B5"><span class="toc-number">2.4.2.</span> <span class="toc-text">按容器元素对齐分页</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scrollTransition%E8%A7%86%E8%A7%89%E6%95%88%E6%9E%9C"><span class="toc-number">2.5.</span> <span class="toc-text">scrollTransition视觉效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ScrollView-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">2.6.</span> <span class="toc-text">ScrollView-参考资料</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%A1%A3"><span class="toc-number">2.6.1.</span> <span class="toc-text">文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WWDC"><span class="toc-number">2.6.2.</span> <span class="toc-text">WWDC</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List%E5%88%97%E8%A1%A8"><span class="toc-number">3.</span> <span class="toc-text">List列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#List"><span class="toc-number">3.1.</span> <span class="toc-text">List</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E8%AE%BE%E7%BD%AE%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">List-设置样式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.2.1.</span> <span class="toc-text">内置样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E9%AB%98"><span class="toc-number">3.2.2.</span> <span class="toc-text">行高</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%9A%94%E7%AC%A6"><span class="toc-number">3.2.3.</span> <span class="toc-text">分隔符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">3.2.4.</span> <span class="toc-text">背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Section"><span class="toc-number">3.2.5.</span> <span class="toc-text">Section</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#safeAreaInset"><span class="toc-number">3.2.6.</span> <span class="toc-text">safeAreaInset</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%A7%BB%E5%8A%A8%E5%85%83%E7%B4%A0"><span class="toc-number">3.3.</span> <span class="toc-text">List-移动元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E6%90%9C%E7%B4%A2"><span class="toc-number">3.4.</span> <span class="toc-text">List-搜索</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%92%8C%E6%90%9C%E7%B4%A2%E5%BB%BA%E8%AE%AE"><span class="toc-number">3.4.1.</span> <span class="toc-text">搜索和搜索建议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%88%97%E8%A1%A8%E4%B8%AD%E6%98%BE%E7%A4%BA%E6%90%9C%E7%B4%A2%E5%BB%BA%E8%AE%AE"><span class="toc-number">3.4.2.</span> <span class="toc-text">在列表中显示搜索建议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%8A%B6%E6%80%81"><span class="toc-number">3.4.3.</span> <span class="toc-text">搜索状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E6%A0%8F%E5%A4%96%E8%A7%82"><span class="toc-number">3.4.4.</span> <span class="toc-text">搜索栏外观</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%8E%BB%E6%8A%96%E5%8A%A8"><span class="toc-number">3.4.5.</span> <span class="toc-text">搜索去抖动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="toc-number">3.5.</span> <span class="toc-text">List-下拉刷新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E8%BD%BB%E6%89%AB%E6%93%8D%E4%BD%9C"><span class="toc-number">3.6.</span> <span class="toc-text">List-轻扫操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E5%A4%A7%E7%BA%B2%E8%A7%86%E5%9B%BE"><span class="toc-number">3.7.</span> <span class="toc-text">List-大纲视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#List-%E6%A0%91%E7%8A%B6%E7%BB%93%E6%9E%84"><span class="toc-number">3.7.1.</span> <span class="toc-text">List 树状结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DisclosureGroup-%E5%AE%9E%E7%8E%B0%E5%B1%95%E5%BC%80%E5%92%8C%E6%8A%98%E5%8F%A0"><span class="toc-number">3.7.2.</span> <span class="toc-text">DisclosureGroup 实现展开和折叠</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OutlineGroup-%E5%88%9B%E5%BB%BA%E5%A4%A7%E7%BA%B2%E8%A7%86%E5%9B%BE"><span class="toc-number">3.7.3.</span> <span class="toc-text">OutlineGroup 创建大纲视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E5%90%88-OutlineGroup-%E5%92%8C-DisclosureGroup-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%AF%E6%8A%98%E5%8F%A0%E5%A4%A7%E7%BA%B2%E8%A7%86%E5%9B%BE"><span class="toc-number">3.7.4.</span> <span class="toc-text">结合 OutlineGroup 和 DisclosureGroup 实现自定义可折叠大纲视图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E5%AE%8C%E5%85%A8%E5%8F%AF%E7%82%B9%E5%87%BB%E7%9A%84%E8%A1%8C"><span class="toc-number">3.8.</span> <span class="toc-text">List-完全可点击的行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%B4%A2%E5%BC%95%E6%A0%87%E9%A2%98"><span class="toc-number">3.9.</span> <span class="toc-text">List-索引标题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A"><span class="toc-number">3.10.</span> <span class="toc-text">List-加载更多</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lazy%E5%AE%B9%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text">Lazy容器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LazyVStack%E5%92%8CLazyHStack"><span class="toc-number">4.1.</span> <span class="toc-text">LazyVStack和LazyHStack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LazyVGrid%E5%92%8CLazyHGrid"><span class="toc-number">4.2.</span> <span class="toc-text">LazyVGrid和LazyHGrid</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Grid"><span class="toc-number">5.</span> <span class="toc-text">Grid</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Table%E8%A1%A8%E6%A0%BC"><span class="toc-number">6.</span> <span class="toc-text">Table表格</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Table"><span class="toc-number">6.1.</span> <span class="toc-text">Table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-%E6%A0%B7%E5%BC%8F"><span class="toc-number">6.2.</span> <span class="toc-text">Table-样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-%E8%A1%8C%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">6.3.</span> <span class="toc-text">Table-行的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-%E5%A4%9A%E5%B1%9E%E6%80%A7%E6%8E%92%E5%BA%8F"><span class="toc-number">6.4.</span> <span class="toc-text">Table-多属性排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-contextMenu"><span class="toc-number">6.5.</span> <span class="toc-text">Table-contextMenu</span></a></li></ol></li></ol>
</div></main>
          <aside class="left-column">
            
            <div class="card card-author">
              
<img src="/img/ming.jpeg" class="author-img">

<p class="author-name">戴铭</p>
<p class="author-description">极客时间《iOS开发高手课》和纸书《跟戴铭学iOS编程》作者</p>
<div class="author-message">
  <a class="author-posts-count" href="/archives">
    <span>76</span>
    <span>Posts</span>
  </a>
  <a class="author-categories-count" href="/categories">
    <span>7</span>
    <span>Categories</span>
  </a>
  <a class="author-tags-count" href="/tags">
    <span>44</span>
    <span>Tags</span>
  </a>
</div>

<div class="author-card-society">
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://weibo.com/allstarming">
        <i class="iconfont icon-sina society-icon"></i>
      </a>
    </div>
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://github.com/ming1016">
        <i class="iconfont icon-github society-icon"></i>
      </a>
    </div>
  
    <div class="author-card-society-icon">
      <a href="mailto:ming1016@foxmail.com">
        <i class="iconfont icon-mail society-icon"></i>
      </a>
    </div>
  
    <div class="author-card-society-icon">
      <a href="/atom.xml">
        <i class="iconfont icon-chrome society-icon"></i>
      </a>
    </div>
  
</div>

            </div>
            
            <div class="sticky-tablet">
  
  
  <article class="display-when-two-columns spacer">
    <div class="card card-content toc-card">
      <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>TOC</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ForEach"><span class="toc-number">1.</span> <span class="toc-text">ForEach</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E8%8C%83%E5%9B%B4%E8%BF%9B%E8%A1%8C%E7%BC%96%E5%8F%B7"><span class="toc-number">1.2.</span> <span class="toc-text">使用索引范围进行编号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-enumerated-%E7%BC%96%E5%8F%B7"><span class="toc-number">1.3.</span> <span class="toc-text">使用 enumerated 编号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-zip-%E7%BC%96%E5%8F%B7"><span class="toc-number">1.4.</span> <span class="toc-text">使用 zip 编号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scroll%E8%A7%86%E5%9B%BE"><span class="toc-number">2.</span> <span class="toc-text">Scroll视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ScrollView"><span class="toc-number">2.1.</span> <span class="toc-text">ScrollView</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E-modifier"><span class="toc-number">2.1.1.</span> <span class="toc-text">新增 modifier</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ScrollViewReader"><span class="toc-number">2.1.2.</span> <span class="toc-text">ScrollViewReader</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BA%E5%AE%9A%E5%88%B0%E6%BB%9A%E5%8A%A8%E8%A7%86%E5%9B%BE%E7%9A%84%E9%A1%B6%E9%83%A8"><span class="toc-number">2.2.</span> <span class="toc-text">固定到滚动视图的顶部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%9A%E5%8A%A8%E5%88%B0%E7%89%B9%E5%AE%9A%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">2.3.</span> <span class="toc-text">滚动到特定的位置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#scrollPostion-%E7%89%88%E6%9C%AC"><span class="toc-number">2.3.1.</span> <span class="toc-text">scrollPostion 版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ScrollViewReader-%E7%89%88%E6%9C%AC"><span class="toc-number">2.3.2.</span> <span class="toc-text">ScrollViewReader 版本</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scrollTargetBehavior%E5%88%86%E9%A1%B5%E6%BB%9A%E5%8A%A8"><span class="toc-number">2.4.</span> <span class="toc-text">scrollTargetBehavior分页滚动</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E5%8F%AF%E8%A7%86%E5%B0%BA%E5%AF%B8%E5%88%86%E9%A1%B5"><span class="toc-number">2.4.1.</span> <span class="toc-text">按可视尺寸分页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E5%AE%B9%E5%99%A8%E5%85%83%E7%B4%A0%E5%AF%B9%E9%BD%90%E5%88%86%E9%A1%B5"><span class="toc-number">2.4.2.</span> <span class="toc-text">按容器元素对齐分页</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scrollTransition%E8%A7%86%E8%A7%89%E6%95%88%E6%9E%9C"><span class="toc-number">2.5.</span> <span class="toc-text">scrollTransition视觉效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ScrollView-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">2.6.</span> <span class="toc-text">ScrollView-参考资料</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%A1%A3"><span class="toc-number">2.6.1.</span> <span class="toc-text">文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WWDC"><span class="toc-number">2.6.2.</span> <span class="toc-text">WWDC</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List%E5%88%97%E8%A1%A8"><span class="toc-number">3.</span> <span class="toc-text">List列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#List"><span class="toc-number">3.1.</span> <span class="toc-text">List</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E8%AE%BE%E7%BD%AE%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">List-设置样式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.2.1.</span> <span class="toc-text">内置样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E9%AB%98"><span class="toc-number">3.2.2.</span> <span class="toc-text">行高</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%9A%94%E7%AC%A6"><span class="toc-number">3.2.3.</span> <span class="toc-text">分隔符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">3.2.4.</span> <span class="toc-text">背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Section"><span class="toc-number">3.2.5.</span> <span class="toc-text">Section</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#safeAreaInset"><span class="toc-number">3.2.6.</span> <span class="toc-text">safeAreaInset</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%A7%BB%E5%8A%A8%E5%85%83%E7%B4%A0"><span class="toc-number">3.3.</span> <span class="toc-text">List-移动元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E6%90%9C%E7%B4%A2"><span class="toc-number">3.4.</span> <span class="toc-text">List-搜索</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%92%8C%E6%90%9C%E7%B4%A2%E5%BB%BA%E8%AE%AE"><span class="toc-number">3.4.1.</span> <span class="toc-text">搜索和搜索建议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%88%97%E8%A1%A8%E4%B8%AD%E6%98%BE%E7%A4%BA%E6%90%9C%E7%B4%A2%E5%BB%BA%E8%AE%AE"><span class="toc-number">3.4.2.</span> <span class="toc-text">在列表中显示搜索建议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%8A%B6%E6%80%81"><span class="toc-number">3.4.3.</span> <span class="toc-text">搜索状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E6%A0%8F%E5%A4%96%E8%A7%82"><span class="toc-number">3.4.4.</span> <span class="toc-text">搜索栏外观</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%8E%BB%E6%8A%96%E5%8A%A8"><span class="toc-number">3.4.5.</span> <span class="toc-text">搜索去抖动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="toc-number">3.5.</span> <span class="toc-text">List-下拉刷新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E8%BD%BB%E6%89%AB%E6%93%8D%E4%BD%9C"><span class="toc-number">3.6.</span> <span class="toc-text">List-轻扫操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E5%A4%A7%E7%BA%B2%E8%A7%86%E5%9B%BE"><span class="toc-number">3.7.</span> <span class="toc-text">List-大纲视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#List-%E6%A0%91%E7%8A%B6%E7%BB%93%E6%9E%84"><span class="toc-number">3.7.1.</span> <span class="toc-text">List 树状结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DisclosureGroup-%E5%AE%9E%E7%8E%B0%E5%B1%95%E5%BC%80%E5%92%8C%E6%8A%98%E5%8F%A0"><span class="toc-number">3.7.2.</span> <span class="toc-text">DisclosureGroup 实现展开和折叠</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OutlineGroup-%E5%88%9B%E5%BB%BA%E5%A4%A7%E7%BA%B2%E8%A7%86%E5%9B%BE"><span class="toc-number">3.7.3.</span> <span class="toc-text">OutlineGroup 创建大纲视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E5%90%88-OutlineGroup-%E5%92%8C-DisclosureGroup-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%AF%E6%8A%98%E5%8F%A0%E5%A4%A7%E7%BA%B2%E8%A7%86%E5%9B%BE"><span class="toc-number">3.7.4.</span> <span class="toc-text">结合 OutlineGroup 和 DisclosureGroup 实现自定义可折叠大纲视图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E5%AE%8C%E5%85%A8%E5%8F%AF%E7%82%B9%E5%87%BB%E7%9A%84%E8%A1%8C"><span class="toc-number">3.8.</span> <span class="toc-text">List-完全可点击的行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%B4%A2%E5%BC%95%E6%A0%87%E9%A2%98"><span class="toc-number">3.9.</span> <span class="toc-text">List-索引标题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A"><span class="toc-number">3.10.</span> <span class="toc-text">List-加载更多</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lazy%E5%AE%B9%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text">Lazy容器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LazyVStack%E5%92%8CLazyHStack"><span class="toc-number">4.1.</span> <span class="toc-text">LazyVStack和LazyHStack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LazyVGrid%E5%92%8CLazyHGrid"><span class="toc-number">4.2.</span> <span class="toc-text">LazyVGrid和LazyHGrid</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Grid"><span class="toc-number">5.</span> <span class="toc-text">Grid</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Table%E8%A1%A8%E6%A0%BC"><span class="toc-number">6.</span> <span class="toc-text">Table表格</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Table"><span class="toc-number">6.1.</span> <span class="toc-text">Table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-%E6%A0%B7%E5%BC%8F"><span class="toc-number">6.2.</span> <span class="toc-text">Table-样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-%E8%A1%8C%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">6.3.</span> <span class="toc-text">Table-行的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-%E5%A4%9A%E5%B1%9E%E6%80%A7%E6%8E%92%E5%BA%8F"><span class="toc-number">6.4.</span> <span class="toc-text">Table-多属性排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-contextMenu"><span class="toc-number">6.5.</span> <span class="toc-text">Table-contextMenu</span></a></li></ol></li></ol>
    </div>
  </article>
  
  
  <article class="card card-content">
    <div class="categories-card">
  <div class="categories-header"><i class="iconfont icon-fenlei" style="padding-right: 2px;"></i>Categories</div>
  <div class="categories-list">
    
      <a href="/categories/Programming">
        <div class="categories-list-item">
          Programming
          <span class="categories-list-item-badge">49</span>
        </div>
      </a>
    
      <a href="/categories/My-novel">
        <div class="categories-list-item">
          My-novel
          <span class="categories-list-item-badge">4</span>
        </div>
      </a>
    
      <a href="/categories/My-painting">
        <div class="categories-list-item">
          My-painting
          <span class="categories-list-item-badge">8</span>
        </div>
      </a>
    
      <a href="/categories/Podcast">
        <div class="categories-list-item">
          Podcast
          <span class="categories-list-item-badge">3</span>
        </div>
      </a>
    
      <a href="/categories/App">
        <div class="categories-list-item">
          App
          <span class="categories-list-item-badge">10</span>
        </div>
      </a>
    
      <a href="/categories/travel">
        <div class="categories-list-item">
          travel
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/APP">
        <div class="categories-list-item">
          APP
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content">
    <div class="tags-card">
  <div class="tags-header"><i class="iconfont icon-biaoqian" style="padding-right: 2px;"></i>hot tags</div>
  <div class="tags-list">
    
    <a href="\tags\iOS" title="iOS"><div class="tags-list-item">iOS</div></a>
    
    <a href="\tags\Swift" title="Swift"><div class="tags-list-item">Swift</div></a>
    
    <a href="\tags\Apple" title="Apple"><div class="tags-list-item">Apple</div></a>
    
    <a href="\tags\SwiftUI" title="SwiftUI"><div class="tags-list-item">SwiftUI</div></a>
    
    <a href="\tags\Painting" title="Painting"><div class="tags-list-item">Painting</div></a>
    
    <a href="\tags\Slides" title="Slides"><div class="tags-list-item">Slides</div></a>
    
    <a href="\tags\iPad" title="iPad"><div class="tags-list-item">iPad</div></a>
    
    <a href="\tags\Procreate" title="Procreate"><div class="tags-list-item">Procreate</div></a>
    
    <a href="\tags\LLVM" title="LLVM"><div class="tags-list-item">LLVM</div></a>
    
    <a href="\tags\App" title="App"><div class="tags-list-item">App</div></a>
    
    <a href="\tags\Web" title="Web"><div class="tags-list-item">Web</div></a>
    
    <a href="\tags\Novel" title="Novel"><div class="tags-list-item">Novel</div></a>
    
    <a href="\tags\Manga" title="Manga"><div class="tags-list-item">Manga</div></a>
    
    <a href="\tags\Podcast" title="Podcast"><div class="tags-list-item">Podcast</div></a>
    
    <a href="\tags\macOS" title="macOS"><div class="tags-list-item">macOS</div></a>
    
    <a href="\tags\Performance optimization" title="Performance optimization"><div class="tags-list-item">Performance optimization</div></a>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
          <aside class="right-column">
            <div class="sticky-widescreen">
  
  
  <article class="card card-content toc-card">
    <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>TOC</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ForEach"><span class="toc-number">1.</span> <span class="toc-text">ForEach</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E8%8C%83%E5%9B%B4%E8%BF%9B%E8%A1%8C%E7%BC%96%E5%8F%B7"><span class="toc-number">1.2.</span> <span class="toc-text">使用索引范围进行编号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-enumerated-%E7%BC%96%E5%8F%B7"><span class="toc-number">1.3.</span> <span class="toc-text">使用 enumerated 编号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-zip-%E7%BC%96%E5%8F%B7"><span class="toc-number">1.4.</span> <span class="toc-text">使用 zip 编号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scroll%E8%A7%86%E5%9B%BE"><span class="toc-number">2.</span> <span class="toc-text">Scroll视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ScrollView"><span class="toc-number">2.1.</span> <span class="toc-text">ScrollView</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E-modifier"><span class="toc-number">2.1.1.</span> <span class="toc-text">新增 modifier</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ScrollViewReader"><span class="toc-number">2.1.2.</span> <span class="toc-text">ScrollViewReader</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BA%E5%AE%9A%E5%88%B0%E6%BB%9A%E5%8A%A8%E8%A7%86%E5%9B%BE%E7%9A%84%E9%A1%B6%E9%83%A8"><span class="toc-number">2.2.</span> <span class="toc-text">固定到滚动视图的顶部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%9A%E5%8A%A8%E5%88%B0%E7%89%B9%E5%AE%9A%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">2.3.</span> <span class="toc-text">滚动到特定的位置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#scrollPostion-%E7%89%88%E6%9C%AC"><span class="toc-number">2.3.1.</span> <span class="toc-text">scrollPostion 版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ScrollViewReader-%E7%89%88%E6%9C%AC"><span class="toc-number">2.3.2.</span> <span class="toc-text">ScrollViewReader 版本</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scrollTargetBehavior%E5%88%86%E9%A1%B5%E6%BB%9A%E5%8A%A8"><span class="toc-number">2.4.</span> <span class="toc-text">scrollTargetBehavior分页滚动</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E5%8F%AF%E8%A7%86%E5%B0%BA%E5%AF%B8%E5%88%86%E9%A1%B5"><span class="toc-number">2.4.1.</span> <span class="toc-text">按可视尺寸分页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E5%AE%B9%E5%99%A8%E5%85%83%E7%B4%A0%E5%AF%B9%E9%BD%90%E5%88%86%E9%A1%B5"><span class="toc-number">2.4.2.</span> <span class="toc-text">按容器元素对齐分页</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scrollTransition%E8%A7%86%E8%A7%89%E6%95%88%E6%9E%9C"><span class="toc-number">2.5.</span> <span class="toc-text">scrollTransition视觉效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ScrollView-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">2.6.</span> <span class="toc-text">ScrollView-参考资料</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%A1%A3"><span class="toc-number">2.6.1.</span> <span class="toc-text">文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WWDC"><span class="toc-number">2.6.2.</span> <span class="toc-text">WWDC</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List%E5%88%97%E8%A1%A8"><span class="toc-number">3.</span> <span class="toc-text">List列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#List"><span class="toc-number">3.1.</span> <span class="toc-text">List</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E8%AE%BE%E7%BD%AE%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">List-设置样式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.2.1.</span> <span class="toc-text">内置样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E9%AB%98"><span class="toc-number">3.2.2.</span> <span class="toc-text">行高</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%9A%94%E7%AC%A6"><span class="toc-number">3.2.3.</span> <span class="toc-text">分隔符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">3.2.4.</span> <span class="toc-text">背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Section"><span class="toc-number">3.2.5.</span> <span class="toc-text">Section</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#safeAreaInset"><span class="toc-number">3.2.6.</span> <span class="toc-text">safeAreaInset</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%A7%BB%E5%8A%A8%E5%85%83%E7%B4%A0"><span class="toc-number">3.3.</span> <span class="toc-text">List-移动元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E6%90%9C%E7%B4%A2"><span class="toc-number">3.4.</span> <span class="toc-text">List-搜索</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%92%8C%E6%90%9C%E7%B4%A2%E5%BB%BA%E8%AE%AE"><span class="toc-number">3.4.1.</span> <span class="toc-text">搜索和搜索建议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%88%97%E8%A1%A8%E4%B8%AD%E6%98%BE%E7%A4%BA%E6%90%9C%E7%B4%A2%E5%BB%BA%E8%AE%AE"><span class="toc-number">3.4.2.</span> <span class="toc-text">在列表中显示搜索建议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%8A%B6%E6%80%81"><span class="toc-number">3.4.3.</span> <span class="toc-text">搜索状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E6%A0%8F%E5%A4%96%E8%A7%82"><span class="toc-number">3.4.4.</span> <span class="toc-text">搜索栏外观</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%8E%BB%E6%8A%96%E5%8A%A8"><span class="toc-number">3.4.5.</span> <span class="toc-text">搜索去抖动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="toc-number">3.5.</span> <span class="toc-text">List-下拉刷新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E8%BD%BB%E6%89%AB%E6%93%8D%E4%BD%9C"><span class="toc-number">3.6.</span> <span class="toc-text">List-轻扫操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E5%A4%A7%E7%BA%B2%E8%A7%86%E5%9B%BE"><span class="toc-number">3.7.</span> <span class="toc-text">List-大纲视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#List-%E6%A0%91%E7%8A%B6%E7%BB%93%E6%9E%84"><span class="toc-number">3.7.1.</span> <span class="toc-text">List 树状结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DisclosureGroup-%E5%AE%9E%E7%8E%B0%E5%B1%95%E5%BC%80%E5%92%8C%E6%8A%98%E5%8F%A0"><span class="toc-number">3.7.2.</span> <span class="toc-text">DisclosureGroup 实现展开和折叠</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OutlineGroup-%E5%88%9B%E5%BB%BA%E5%A4%A7%E7%BA%B2%E8%A7%86%E5%9B%BE"><span class="toc-number">3.7.3.</span> <span class="toc-text">OutlineGroup 创建大纲视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E5%90%88-OutlineGroup-%E5%92%8C-DisclosureGroup-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%AF%E6%8A%98%E5%8F%A0%E5%A4%A7%E7%BA%B2%E8%A7%86%E5%9B%BE"><span class="toc-number">3.7.4.</span> <span class="toc-text">结合 OutlineGroup 和 DisclosureGroup 实现自定义可折叠大纲视图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E5%AE%8C%E5%85%A8%E5%8F%AF%E7%82%B9%E5%87%BB%E7%9A%84%E8%A1%8C"><span class="toc-number">3.8.</span> <span class="toc-text">List-完全可点击的行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%B4%A2%E5%BC%95%E6%A0%87%E9%A2%98"><span class="toc-number">3.9.</span> <span class="toc-text">List-索引标题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A"><span class="toc-number">3.10.</span> <span class="toc-text">List-加载更多</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lazy%E5%AE%B9%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text">Lazy容器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LazyVStack%E5%92%8CLazyHStack"><span class="toc-number">4.1.</span> <span class="toc-text">LazyVStack和LazyHStack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LazyVGrid%E5%92%8CLazyHGrid"><span class="toc-number">4.2.</span> <span class="toc-text">LazyVGrid和LazyHGrid</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Grid"><span class="toc-number">5.</span> <span class="toc-text">Grid</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Table%E8%A1%A8%E6%A0%BC"><span class="toc-number">6.</span> <span class="toc-text">Table表格</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Table"><span class="toc-number">6.1.</span> <span class="toc-text">Table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-%E6%A0%B7%E5%BC%8F"><span class="toc-number">6.2.</span> <span class="toc-text">Table-样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-%E8%A1%8C%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">6.3.</span> <span class="toc-text">Table-行的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-%E5%A4%9A%E5%B1%9E%E6%80%A7%E6%8E%92%E5%BA%8F"><span class="toc-number">6.4.</span> <span class="toc-text">Table-多属性排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-contextMenu"><span class="toc-number">6.5.</span> <span class="toc-text">Table-contextMenu</span></a></li></ol></li></ol>
  </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header"><i class="iconfont icon-wenzhang_huaban" style="padding-right: 2px;"></i>Recent Posts</div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2024-11-04</div>
        <a href="/2024/11/04/introduction-japanese-colors/"><div class="recent-posts-item-content">看完这篇全网最全日本传统颜色的介绍，你就能够更懂日本</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2024-10-28</div>
        <a href="/2024/10/28/kwdc24-in-seoul/"><div class="recent-posts-item-content">我在韩国首尔 KWDC24 做的技术分享</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2024-09-12</div>
        <a href="/2024/09/12/my-pkm/"><div class="recent-posts-item-content">我是怎么做个人知识管理（PKM）的，从史前时代备忘录、Sublime，经历了Evernote，Markdown兴起，Bear的优雅，Notion革命，飞书语雀，Obsidian、Flomo，到最后使用卢曼卡片盒笔记法串起了流程</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2024-09-05</div>
        <a href="/2024/09/05/iOS-performance-optimization-second-time/"><div class="recent-posts-item-content">二刷 iOS 性能与编译，简单点说</div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
        </div>
      </div>
    </div>
  </div>
  
  <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>Copyright ©
          
          2014 -
          
          2024
        </span>
        <a href="/" class="footer-link">戴铭的博客 </a>
      </div>
    </div>

    
    
    
    <div class="BbeiAn-info">
      <a target="_blank" rel="noopener" href="http://www.beian.miit.gov.cn/">京ICP备2024068292号-1 </a>
    </div>
    
    <div class="BbeiAn-info">
      <span style="padding-left: 25px;background: url(/img/beian.png) no-repeat left center"></span>
      <a target="_blank" rel="noopener" href="https://beian.mps.gov.cn/#/query/webSearch?code=11010802044427 ">京公网安备11010802044427
      </a>
      <br />
    </div>
    
    
    
      <div class="footer-dsc">
        
        本站总访问量<span id="busuanzi_value_site_pv"></span>次
        
        
        <span>&nbsp;|&nbsp;</span>
        
        
        本站总访客数<span id="busuanzi_value_site_uv"></span>次
        
      </div>
      
    
</footer>
  <a role="button" id="scrollbutton" class="basebutton" >
  <i class="iconfont icon-arrowleft button-icon"></i>
</a>
<a role="button" id="menubutton" class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a role="button" id="popbutton" class="basebutton">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a role="button" id="darkbutton" class="basebutton darkwidget">
  <i class="iconfont icon-weather button-icon"></i>
</a>

  
  
  
  <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img');
    var i;
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a');
      wrapper.setAttribute('data-fslightbox', 'gallery');
      wrapper.setAttribute('href', img[i].getAttribute('data-src'));
      wrapper.setAttribute('style', 'width: 100%; display: flex; justify-content: center;');
      img[i].parentElement.insertBefore(wrapper, img[i]);
      wrapper.appendChild(img[i]);
    }
    refreshFsLightbox();
  }
</script>
<script>loadScript("//cdn.jsdelivr.net/npm/fslightbox@3.1.0/index.min.js", addImgLayout)</script>
  
  
  
<script src="/js/main.js"></script>

  
  <script>loadScript("/js/lib/busuanzi.min.js")</script>
  
  
  <script>
    var addLazyload = function () {
      var observer = lozad('.lozad', {
        load: function (el) {
          el.srcset = el.getAttribute('data-src');
        },
        loaded: function (el) {
          el.classList.add('loaded');
        }
      });
      observer.observe();
    }
  </script>
  <script>loadScript("/js/lib/lozad.min.js", addLazyload)</script>
  
  
</body>

</html>